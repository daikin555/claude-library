---
title: "PDFとリクエストサイズのエラーメッセージ改善（上限値の明示）"
date: 2026-02-04
tags: [pdf, error-message, ux]
---

# PDFとリクエストサイズのエラーメッセージ改善（上限値の明示）

## 原文（日本語に翻訳）
PDFおよびリクエストサイズのエラーメッセージを改善し、実際の上限（100ページ、20MB）を表示するようにしました。

## 原文（英語）
Improved PDF and request size error messages to show actual limits (100 pages, 20MB)

## 概要
PDFファイルやリクエストがサイズ上限を超えた場合のエラーメッセージが改善され、具体的な上限値（PDFは100ページまで、リクエストサイズは20MBまで）が明示されるようになりました。これにより、ユーザーは何が問題だったのかを即座に理解できます。

## 基本的な使い方

### PDF読み取り時のエラー確認
```bash
claude

# 大きなPDFファイルを読み取ろうとする
> "@large-document.pdf の内容を要約して"

# 以前のエラー: "PDF too large"
# 現在のエラー: "PDF exceeds the 100 page limit. This file has 150 pages."
```

### ページ範囲指定で回避
```bash
# pagesパラメータで特定ページのみ読み取る
> "@large-document.pdf の1-20ページを読み取って"

# または、重要なセクションのみ
> "@large-document.pdf の50-70ページを分析して"

# 正常に読み取り可能（20ページ以内）
```

## 実践例

### 大規模PDF文書の段階的読み取り
100ページを超えるPDFを複数回に分けて読み取る：

```bash
claude

# 第1部を読み取り
> "@technical-manual.pdf (500ページ) の1-100ページを要約して"

# 結果を確認後、次の部分を読み取り
> "同じファイルの101-200ページを読み取って"

# 必要に応じて続ける
> "201-300ページを確認して"
```

### 大容量ファイルのエラーハンドリング
20MBを超えるリクエストを回避：

```bash
# 複数の大きなファイルを一度に参照しようとした場合
> "@file1.pdf @file2.pdf @file3.pdf を比較して"

# エラー: "Request size exceeds 20MB limit. Current request: 25MB"

# 解決策: ファイルを分けて処理
> "@file1.pdf の要点をまとめて"
> "@file2.pdf の要点をまとめて"
> "@file3.pdf と前の2つの要点を比較して"
```

### PDFの効率的な利用（軽量参照モード）
10ページを超えるPDFは自動的に軽量参照として扱われます：

```bash
# 大きなPDFを@メンションで参照
> "@research-paper.pdf (50ページ) について質問があります"

# Claude Codeは軽量参照モードを使用
# 「このPDFには50ページあります。特定のページ範囲を指定してください」

# ページ範囲を指定
> "3-8ページの実験結果について説明して"

# 指定範囲のみを読み取り（効率的）
```

### エラーメッセージからの学習
新しいエラーメッセージは具体的な対処法を示唆：

```bash
# PDFページ超過エラー
> "@huge-book.pdf を分析して"

# エラー応答:
# "PDF exceeds the 100 page limit (this file: 300 pages).
#  Use the 'pages' parameter to read specific sections.
#  Example: pages: '1-50'"

# 推奨される対処法が明確
```

## 注意点

- **PDF上限**: 1回のリクエストで読み取れるのは最大100ページです。これはAPIの制限であり、Claude Codeの制限ではありません。

- **リクエストサイズ上限**: 1回のAPIリクエストの合計サイズは20MBが上限です。これには、メッセージテキスト、ファイル内容、すべての添付データが含まれます。

- **軽量参照モード**: 10ページを超えるPDFを `@` でメンションすると、全内容がコンテキストに展開されず、軽量参照として扱われます。特定ページを読むには `pages` パラメータが必要です。

- **pagesパラメータの使い方**: ReadツールでPDFを読み取る際、`pages: "1-20"` のように範囲を指定できます。1リクエストで最大20ページまで推奨されています。

- **段階的処理の推奨**: 大きなPDFは複数のリクエストに分割して処理することで、より詳細な分析が可能になります。

- **エラーメッセージの活用**: 新しいエラーメッセージには、現在のファイルサイズや推奨される対処法が含まれています。エラーが出たら、メッセージをよく読んで対応してください。

## 関連情報

- [Read tool documentation - Claude Code Docs](https://code.claude.com/docs/en/tools#read)
- [PDF pages parameter - v2.1.30 update](./2.1.30-pdf-pages-parameter.md)
- [Working with PDFs - Claude API Docs](https://platform.claude.com/docs/en/build-with-claude/pdfs)
- [Troubleshooting - Claude Code Docs](https://code.claude.com/docs/en/troubleshooting)
