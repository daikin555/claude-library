---
title: "追加ディレクトリからのスキル自動読み込み"
date: 2026-02-05
tags: [skills, add-dir, configuration]
---

## 原文（日本語訳）
追加ディレクトリ（`--add-dir`）内の `.claude/skills/` で定義されたスキルが自動的に読み込まれるようになりました。

## 原文（英語）
Skills defined in `.claude/skills/` within additional directories (`--add-dir`) are now loaded automatically.

## 概要
`--add-dir` オプションで指定した追加ディレクトリ内に `.claude/skills/` ディレクトリがある場合、そこで定義されたカスタムスキルが自動的に読み込まれるようになりました。これにより、プロジェクトごとに異なるスキルセットを簡単に管理できます。

## 基本的な使い方

追加ディレクトリを指定して Claude Code を起動すると、そのディレクトリ内のスキルが自動的に利用可能になります。

```bash
# プロジェクトディレクトリに .claude/skills/ が含まれている場合
claude --add-dir /path/to/project

# 複数のディレクトリを追加
claude --add-dir /path/to/project1 --add-dir /path/to/project2
```

## ディレクトリ構造

プロジェクトディレクトリ内にスキルを配置する構造：

```
/path/to/project/
├── .claude/
│   └── skills/
│       ├── deploy.md          # デプロイスキル
│       ├── test-suite.md      # テストスイート実行スキル
│       └── generate-docs.md   # ドキュメント生成スキル
├── src/
└── package.json
```

Claude Code 起動時：

```bash
cd /path/to/project
claude --add-dir .

# または別のディレクトリから
claude --add-dir /path/to/project
```

これで `deploy.md`、`test-suite.md`、`generate-docs.md` のスキルが自動的に利用可能になります。

## 実践例

### プロジェクト固有のデプロイスキル

プロジェクトごとに異なるデプロイ手順を持つ場合、各プロジェクトに専用のスキルを配置できます。

```bash
# プロジェクトA: AWS Lambda へのデプロイ
/projectA/.claude/skills/deploy.md

# プロジェクトB: Vercel へのデプロイ
/projectB/.claude/skills/deploy.md
```

使用時：

```bash
cd /projectA
claude --add-dir .
> /deploy  # プロジェクトAのLambdaデプロイが実行される
```

```bash
cd /projectB
claude --add-dir .
> /deploy  # プロジェクトBのVercelデプロイが実行される
```

### モノレポでのパッケージ別スキル

モノレポ環境で、パッケージごとに異なるスキルセットを管理できます。

```
monorepo/
├── packages/
│   ├── frontend/
│   │   └── .claude/skills/
│   │       ├── build-frontend.md
│   │       └── test-e2e.md
│   └── backend/
│       └── .claude/skills/
│           ├── migrate-db.md
│           └── test-integration.md
```

フロントエンドで作業：

```bash
claude --add-dir packages/frontend
> /build-frontend  # フロントエンド専用のビルドスキル
> /test-e2e        # E2Eテストスキル
```

バックエンドで作業：

```bash
claude --add-dir packages/backend
> /migrate-db        # データベースマイグレーションスキル
> /test-integration  # 統合テストスキル
```

### チーム共有スキルとプロジェクト固有スキルの組み合わせ

チーム共有のスキルディレクトリとプロジェクト固有のスキルを併用できます。

```
# チーム共有スキル
/team-shared-skills/
└── .claude/skills/
    ├── code-review.md
    └── git-workflow.md

# プロジェクト固有スキル
/my-project/
└── .claude/skills/
    ├── deploy.md
    └── custom-test.md
```

両方を読み込む：

```bash
claude --add-dir /team-shared-skills --add-dir /my-project

# 利用可能なスキル：
# - /code-review (チーム共有)
# - /git-workflow (チーム共有)
# - /deploy (プロジェクト固有)
# - /custom-test (プロジェクト固有)
```

### 複数環境での異なるスキルセット

開発環境と本番環境で異なるスキルを使い分けられます。

```
project/
├── .claude/
│   ├── skills-dev/
│   │   └── .claude/skills/
│   │       └── debug-tools.md
│   └── skills-prod/
│       └── .claude/skills/
│           └── monitoring.md
```

開発環境：

```bash
claude --add-dir .claude/skills-dev
> /debug-tools  # 開発用デバッグツール
```

本番環境：

```bash
claude --add-dir .claude/skills-prod
> /monitoring  # 本番監視ツール
```

## スキルファイルの作成例

プロジェクト固有のテストスキルを作成：

```bash
mkdir -p .claude/skills
cat > .claude/skills/run-tests.md << 'EOF'
# Test Suite Runner

このプロジェクトの全テストスイートを実行します。

## Steps
1. ユニットテストを実行（npm run test:unit）
2. 統合テストを実行（npm run test:integration）
3. E2Eテストを実行（npm run test:e2e）
4. カバレッジレポートを生成

## Output
テスト結果のサマリーとカバレッジ情報を表示
EOF
```

使用：

```bash
claude --add-dir .
> /run-tests
```

## 注意点

- **スキル名の衝突**: 複数の `--add-dir` で同名のスキルが存在する場合、最後に読み込まれたものが優先されます
- **ディレクトリ構造**: `.claude/skills/` のパスは正確に一致する必要があります（大文字小文字も区別されます）
- **スキルの更新**: 新しいスキルを追加した場合、Claude Code を再起動する必要があります
- **相対パスと絶対パス**: `--add-dir` には絶対パスと相対パスの両方が使用できますが、絶対パスの方が確実です
- **グローバルスキルとの関係**: `~/.claude/skills/` のグローバルスキルも引き続き利用可能です
- **設定の永続化**: 頻繁に使用するディレクトリは、エイリアスやシェルスクリプトで設定を簡略化できます

```bash
# ~/.bashrc に追加
alias claude-myproject='claude --add-dir /path/to/myproject'
```

## 優先順位

スキルの読み込み優先順位：

1. `--add-dir` で指定されたディレクトリのスキル（後に指定されたものが優先）
2. カレントディレクトリの `.claude/skills/`
3. グローバルスキル `~/.claude/skills/`

## 関連情報

- [Claude Code Skills Documentation](https://github.com/anthropics/claude-code#skills)
- [Custom Skills Guide](https://github.com/anthropics/claude-code/blob/main/docs/skills.md)
- [--add-dir Option](https://github.com/anthropics/claude-code#command-line-options)
