---
title: "Bashコマンド実行時に経過時間とタイムアウト時間を同時表示"
date: 2026-01-29
tags: ['変更', 'bash', 'コマンド', 'UI', '可視性']
---

## 原文（日本語に翻訳）

Bashコマンドの実行時に、経過時間と併せてタイムアウト時間を表示するように変更

## 原文（英語）

Changed Bash commands to show timeout duration alongside elapsed time

## 概要

Claude CodeでBashコマンドを実行する際に、これまで表示されていた経過時間に加えて、タイムアウトまでの残り時間も表示されるようになりました。これにより、コマンドがどれくらいで完了する必要があるのか、また、タイムアウトまでどれくらい時間があるのかを視覚的に把握できるようになります。特に長時間実行されるコマンドやビルドプロセスで、残り時間を確認しながら作業できるため、より効率的な開発が可能になります。

## 基本的な使い方

この機能は自動的に有効になっており、Bashコマンド実行時に自動的に表示されます。

### 表示形式

```
実行中... 45s / 120s
       ↑経過時間  ↑タイムアウト時間
```

## 実践例

### ビルドコマンドの実行

```bash
claude

> プロジェクトをビルドしてください

Bashを実行: npm run build
実行中... 30s / 120s
# タイムアウトまで90秒残っていることが分かる

完了 (45s / 120s)
# 45秒で完了し、タイムアウトまで余裕があったことが分かる
```

### テスト実行

```bash
> すべてのテストを実行

Bashを実行: npm test
実行中... 85s / 120s
# タイムアウトまで残り35秒であることが分かる

完了 (95s / 120s)
# ギリギリ間に合ったことが分かる
```

### タイムアウトに近づいた場合

```bash
> 大規模なデータベースマイグレーション

Bashを実行: npm run db:migrate
実行中... 110s / 120s
# タイムアウトまで残り10秒（視覚的に警告）

⚠️ タイムアウト (120s / 120s)
# タイムアウトしたことが明確に分かる
```

### デフォルトタイムアウトの確認

```bash
# 通常のコマンド（デフォルト120秒）
> git status
実行中... 1s / 120s

# 長時間コマンド（設定で600秒に変更した場合）
> npm run build:production
実行中... 240s / 600s
```

### カスタムタイムアウトの設定

設定ファイルでタイムアウトをカスタマイズできます。

```json
// ~/.claude/settings.json
{
  "bash": {
    "defaultTimeout": 300000,  // 5分（ミリ秒）
    "maxTimeout": 600000       // 10分
  }
}
```

```bash
# カスタムタイムアウトが反映される
> npm run build
実行中... 120s / 300s
```

### 進捗の把握

```bash
# 長時間のデプロイプロセス
> デプロイを実行してください

Bashを実行: ./deploy.sh
実行中... 180s / 600s  (30%進行)
# まだ半分以上時間が残っていることが分かる
```

## 注意点

- タイムアウトのデフォルト値は通常120秒（2分）です
- タイムアウトはコマンドごとに設定でき、長時間実行が予想されるコマンドには長めのタイムアウトを設定することを推奨します
- タイムアウトに達すると、コマンドは自動的に中断されます
- タイムアウトが近づくと（残り10秒以下）、警告表示される場合があります
- 設定ファイルでタイムアウト値を変更した場合は、Claude Codeの再起動が必要です
- ネットワークコマンド（curl、wgetなど）は、独自のタイムアウト設定を持っている場合があります
- バックグラウンドプロセスを起動するコマンドには、タイムアウトが適用されません
- Windows環境では、タイムアウトの精度がわずかに低下する場合があります

## 関連情報

- [Bash タイムアウトの設定](https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html)
- [長時間実行コマンドのベストプラクティス](https://unix.stackexchange.com/questions/tagged/timeout)
- [Changelog v2.1.23](https://github.com/anthropics/claude-code/releases/tag/v2.1.23)
- Claude Codeの設定については、`~/.claude/settings.json`を参照してください
