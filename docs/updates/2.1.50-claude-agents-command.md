---
title: "claude agentsコマンドが追加され、設定済みエージェントの一覧を確認できるようになりました"
date: 2026-02-21
tags: [new-feature, agents, cli]
---

## 原文（日本語に翻訳）

`claude agents` CLIコマンドが追加され、設定済みのすべてのエージェントを一覧表示できるようになりました。

## 原文（英語）

Added `claude agents` CLI command to list all configured agents

## 概要

`claude agents` コマンドが新たに追加され、現在のプロジェクトやグローバル設定で定義されているすべてのカスタムエージェントを一覧で確認できるようになりました。エージェントの名前・説明・設定内容などを素早く確認でき、複数のエージェントを管理する際に便利です。

## 基本的な使い方

```bash
# 設定済みエージェントの一覧を表示
claude agents

# 出力例:
# Configured agents:
#
# name: code-reviewer
#   description: コードレビューを実施するエージェント
#   model: claude-opus-4-6
#   source: .claude/agents/code-reviewer.md
#
# name: test-runner
#   description: テストを実行するエージェント
#   model: claude-sonnet-4-6
#   source: .claude/agents/test-runner.md
#
# name: doc-generator
#   description: APIドキュメントを生成するエージェント
#   model: claude-sonnet-4-6
#   source: ~/.claude/agents/doc-generator.md (global)
```

## 実践例

### ユースケース1: プロジェクトのエージェント構成確認

新しいプロジェクトに参加した際に、利用可能なエージェントを確認する場合。

```bash
# プロジェクトにチェックイン
cd /path/to/project

# 利用可能なエージェントを確認
claude agents

# 出力を見て使い方を理解
# → @code-reviewer でコードレビューエージェントを呼び出せる
# → @test-runner でテスト実行エージェントを呼び出せる

# エージェントを使ってみる
claude
> @code-reviewer このPRのコードをレビューして
```

### ユースケース2: グローバルとローカルのエージェント管理

グローバル（ホームディレクトリ）とプロジェクトローカル両方のエージェントを把握する場合。

```bash
# ホームディレクトリのグローバルエージェント
ls ~/.claude/agents/
# doc-generator.md
# security-scanner.md

# プロジェクトのローカルエージェント
ls .claude/agents/
# code-reviewer.md
# test-runner.md

# 全エージェントをまとめて確認
claude agents
# → グローバルとローカル両方が表示される
```

### ユースケース3: スクリプトからエージェント一覧を処理

自動化スクリプトでエージェントの存在を確認する場合。

```bash
#!/bin/bash
# check-agents.sh

# エージェントの存在確認
if claude agents | grep -q "code-reviewer"; then
  echo "code-reviewerエージェントが利用可能です"
  # エージェントを使った処理を実行
else
  echo "code-reviewerエージェントが設定されていません"
  echo ".claude/agents/code-reviewer.md を作成してください"
fi
```

### ユースケース4: エージェントのデバッグ

エージェント定義が正しく読み込まれているか確認する場合。

```bash
# エージェントファイルを作成
cat > .claude/agents/my-agent.md << 'EOF'
---
name: my-agent
description: テスト用エージェント
model: claude-sonnet-4-6
---

タスクを実行してください。
EOF

# 正しく認識されているか確認
claude agents
# → my-agent が一覧に表示される

# 表示されない場合はファイルのフォーマットを確認
```

## 注意点

- `claude agents` はプロジェクトローカル（`.claude/agents/`）とグローバル（`~/.claude/agents/`）の両方のエージェントを表示します。
- エージェント定義ファイル（`.md`）の frontmatter が正しくないと一覧に表示されない場合があります。
- エージェントが多い場合、出力が長くなります。`| grep` で絞り込んで検索できます。
- このコマンドはエージェントの一覧表示のみで、エージェントの実行は行いません。エージェントの実行はClaude内で `@エージェント名` 形式で呼び出します。

## 関連情報

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [エージェントのworktree分離](./2.1.50-agent-worktree-isolation.md)
- [カスタムエージェントの作成方法](https://docs.anthropic.com/ja/docs/claude-code/agents)
