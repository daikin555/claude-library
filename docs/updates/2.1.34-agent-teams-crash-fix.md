---
title: "エージェントチーム設定変更時のクラッシュ修正"
date: 2026-02-06
tags: [バグ修正, エージェントチーム, 安定性]
---

## 原文（日本語訳）

レンダリング間でエージェントチーム設定が変更された際のクラッシュを修正

## 原文（英語）

Fixed a crash when agent teams setting changed between renders

## 概要

Claude Code 2.1.34では、エージェントチーム機能の設定を変更した際に発生していたクラッシュの問題が修正されました。この修正により、設定の変更をより安全に行えるようになり、開発体験の安定性が向上しました。

## 基本的な使い方

エージェントチーム機能の設定は、`.claude/settings.json`ファイルまたは環境変数`CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1`で有効化できます。

```json
{
  "env": {
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  }
}
```

この修正により、設定を変更してもClaude Codeがクラッシュすることなく、スムーズに新しい設定が適用されるようになりました。

## 実践例

### 設定の動的な切り替え

以前は、エージェントチーム機能を有効化・無効化する際にクラッシュが発生する可能性がありましたが、今回の修正により以下のようなワークフローが安全に実行できるようになりました。

1. **シンプルなタスクでは無効化**
   ```json
   {
     "env": {
       "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "0"
     }
   }
   ```

2. **複雑なタスクでは有効化**
   ```json
   {
     "env": {
       "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
     }
   }
   ```

### 開発フローでの活用

複数モジュールにわたる機能開発やコードレビューなど、並列処理が有効な作業では：

```bash
# エージェントチームを有効化して作業開始
export CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1
claude
```

単一ファイルの編集など、シンプルなタスクでは設定を無効化して、より軽量な動作を選択できます。

### セッション再開時の安定性

セッションを再開する際に、以前の設定と異なる設定が読み込まれた場合でも、クラッシュすることなく正常に動作します。これにより、チーム開発での設定の不一致によるトラブルが軽減されます。

## 注意点

- **エージェントチーム機能は研究プレビュー版**: この機能は現在も開発中であり、セッション再開、タスク調整、シャットダウン動作に関して既知の制限があります
- **設定変更のタイミング**: できるだけセッション間で設定を変更することを推奨します。実行中のタスクがある場合は、完了を待ってから変更する方が安全です
- **パフォーマンス**: エージェントチームは並列探索が実際に価値を生む複雑なタスク（コードレビュー、複数の仮説によるデバッグ、マルチモジュール機能など）で最も効果的です

## 関連情報

- [Claude Code Agent Teams 公式ドキュメント](https://code.claude.com/docs/en/agent-teams)
- [Claude Code Agent Teams セットアップガイド](https://www.marc0.dev/en/blog/claude-code-agent-teams-multiple-ai-agents-working-in-parallel-setup-guide-1770317684454)
- [Claude Code Agent Teams 解説記事](https://addyosmani.com/blog/claude-code-agent-teams/)
- [エージェントチームの動作原理](https://paddo.dev/blog/claude-code-hidden-swarm/)
