---
title: "[VSCode] パーミッション設定先の選択（プロジェクト/ユーザー/セッション）がセッションをまたいで保持されるように改善"
date: 2026-02-17
tags: [vscode, permissions, settings, improvement, persistence]
---

## 原文（日本語に翻訳）

[VSCode] パーミッション設定先の選択（プロジェクト/ユーザー/セッション）がセッションをまたいで保持されるように改善

## 原文（英語）

[VSCode] Improved permission destination choice (project/user/session) to persist across sessions

## 概要

VSCode 拡張機能として使用している Claude Code において、パーミッション（許可設定）の保存先を選択する際（プロジェクト/ユーザー/セッション）に、その選択がセッションをまたいで記憶されるようになりました。以前はセッションを終了するたびに選択がリセットされ、毎回同じ選択をしなければなりませんでしたが、2.1.45 以降はデフォルトの選択が保持されます。

## 基本的な使い方

この改善は VSCode の Claude Code 拡張機能を使用している場合に適用されます。特別な設定は不要です。

パーミッションダイアログが表示された際に選択した保存先（プロジェクト/ユーザー/セッション）が次回以降も記憶されます。

## 実践例

### パーミッション保存先の選択

VSCode で Claude Code がツールの使用許可を求める際：

```
Claude Code がこの操作を行おうとしています:
  ファイルを編集: src/main.ts

許可設定の保存先を選択してください:
  ○ このセッションのみ
  ○ このプロジェクト（.claude/settings.json に保存）
  ● ユーザー全体（~/.claude/settings.json に保存）  ← 前回の選択を記憶
```

### プロジェクト単位での設定

チームで共有するプロジェクトの場合、「プロジェクト」を選択することでチーム全員に設定が適用されます：

```
# プロジェクトを選択した場合
→ .claude/settings.json に保存
→ git 管理対象になり、チーム全員が同じ設定を使える

# ユーザーを選択した場合
→ ~/.claude/settings.json に保存
→ 個人の全プロジェクトに適用

# セッションのみを選択した場合
→ メモリ内のみで保持
→ セッション終了後は消える
```

### 2.1.45 での改善点

```
# 修正前（2.1.44 以前）
- セッション1: 「プロジェクト」を選択
- セッションを終了
- セッション2: デフォルト（通常は「セッションのみ」）に戻ってしまう

# 修正後（2.1.45 以降）
- セッション1: 「プロジェクト」を選択
- セッションを終了
- セッション2: 「プロジェクト」がデフォルトで選択されている
```

## 注意点

- この改善は VSCode 拡張機能版の Claude Code に限定されます。コマンドラインの `claude` コマンドには影響しません。
- 選択の記憶は VSCode のワークスペース設定またはグローバル設定として保存されます。
- 「セッションのみ」を選択した場合も記憶されますが、そのパーミッション自体はセッション終了後に失われます（選択の記憶と、実際のパーミッション設定の保存は別物です）。
- セキュリティ上の懸念がある場合は、常に「セッションのみ」を選択することを検討してください。

## 関連情報

- [Claude Code for VSCode](https://marketplace.visualstudio.com/items?itemName=Anthropic.claude-code)
- [Claude Code パーミッション設定](https://docs.anthropic.com/ja/docs/claude-code/settings#permissions)
- [Claude Code VSCode 拡張機能ガイド](https://docs.anthropic.com/ja/docs/claude-code/ide-integration)
