---
title: "ステータスバーのバックグラウンドタスクインジケータ重複表示を修正"
date: 2025-01-27
tags: [bugfix, ui, status-bar]
---

## 原文（日本語訳）

PR ステータスが表示されているときにバックグラウンドタスクのインジケータが重複して表示される問題を修正

## 原文（英語）

Fixed status bar duplicating background task indicator when PR status was shown

## 概要

ステータスバーにPRステータスが表示されている際、バックグラウンドタスクのインジケータが重複して表示されてしまう視覚的なバグが修正されました。これにより、ステータスバーの情報がより整理され、見やすくなります。

## 基本的な使い方

修正後は、特別な設定なしにステータスバーが正しく表示されます。

```bash
# 通常通りClaude Codeを使用
claude

# PRに関連する作業をしている場合、ステータスバーに以下が重複せずに表示:
# - PRステータス（例: ●）
# - バックグラウンドタスク（実行中の場合）
```

## 実践例

### PRレビュー中のバックグラウンドタスク実行

PRレビューをしながらテストを実行する場合、ステータスバーが正しく表示されます。

```bash
# PRにリンクされたセッションを開始
claude --from-pr 123

# バックグラウンドでテストを実行
> "Run tests in background"
# Ctrl+B でバックグラウンド化

# ステータスバーに以下が重複せずに表示:
# [●] PR #123 | ⚙️ 1 background task
```

### 複数タスクの並行実行

PR作業中に複数のバックグラウンドタスクを実行しても、インジケータが重複しません。

```bash
# PRセッション内で
> "Run build in background"
# Ctrl+B

> "Run linter in background"
# Ctrl+B

# ステータスバーに正しく表示:
# [●] PR #123 | ⚙️ 2 background tasks
```

### PRステータスの色分け確認

修正により、PRステータスの色分け（承認、変更要求など）も正しく視認できます。

```bash
# PRステータスによって色が変わる:
# [●] 緑: 承認済み
# [●] 赤: 変更要求
# [●] 黄: レビュー待ち
# [●] グレー: ドラフト

# バックグラウンドタスクと併せて表示される場合も重複しない
```

### ステータスバーのクリック操作

重複が解消されたことで、ステータスバーのクリックによるPRリンクへのジャンプが正確に機能します。

```bash
# ステータスバーのPRインジケータをクリック
# → ブラウザでPRページが開く

# バックグラウンドタスクインジケータをクリック
# → タスク詳細が表示
```

## 注意点

- この修正はビジュアルの改善であり、機能的な変更はありません
- バックグラウンドタスクとPRステータスは引き続き同時に表示されます
- ターミナルの幅が狭い場合、一部の情報が省略される場合があります

## 関連情報

- [ステータスバーのカスタマイズ](https://code.claude.com/docs/en/status-line)
- [バックグラウンドタスク管理](https://code.claude.com/docs/en/background-tasks)
- [PRステータスインジケータ](https://code.claude.com/docs/en/pr-status)
