---
title: "プラグインのインストール後に再起動なしでコマンド・エージェント・フックが即時使用可能に"
date: 2026-02-17
tags: [bugfix, plugin, commands, agents, hooks, installation]
---

## 原文（日本語に翻訳）

プラグインが提供するコマンド・エージェント・フックが、再起動を必要とせずインストール後すぐに利用できない問題を修正

## 原文（英語）

Fixed plugin-provided commands, agents, and hooks not being available immediately after installation without requiring a restart

## 概要

Claude Code でプラグインをインストールした後、そのプラグインが提供するカスタムコマンド・エージェント・フックを使用するには再起動が必要だった問題が修正されました。2.1.45 以降では、プラグインをインストールすると再起動なしに即座にその機能が利用可能になります。これにより、プラグインの開発・テストのサイクルが大幅に短縮されます。

## 基本的な使い方

この修正はバグフィックスです。特別な設定変更は不要です。プラグインをインストールしたら、以前のように再起動を待たずにすぐに使えます。

```bash
# プラグインをインストール（例）
# ※ プラグインのインストール方法はプラグインによって異なります

# インストール後すぐに使える（2.1.45 以降）
/my-plugin-command  # 再起動なしで即使用可能
```

## 実践例

### プラグイン開発時のワークフロー改善

修正前と修正後の開発サイクルの違い：

```
# 修正前のワークフロー
1. プラグインコードを編集
2. プラグインをインストール
3. Claude Code を再起動 ← 余分なステップ
4. コマンドをテスト
5. バグを発見 → 1に戻る

# 修正後のワークフロー
1. プラグインコードを編集
2. プラグインをインストール
3. コマンドをすぐにテスト ← 再起動不要！
4. バグを発見 → 1に戻る
```

### カスタムスキルの即時テスト

```bash
# スキルファイルを作成・更新
cat > ~/.claude/skills/my-review.md << 'EOF'
Review the code and provide feedback in Japanese.
EOF

# 2.1.45 以降: 即座に使用可能
# Claude Code 内で:
/my-review  # 再起動なしで使える
```

### フックの即時有効化

```json
// .claude/settings.json にフックを追加
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'Bash command executed'"
          }
        ]
      }
    ]
  }
}
```

修正前は上記設定を追加後に再起動が必要でしたが、2.1.45 以降は即座に有効になります。

## 注意点

- この修正はプラグインが提供する「コマンド」「エージェント」「フック」すべてに適用されます。
- プラグインのインストール自体（`npm install` など）は引き続き同じ手順で行います。
- 一部のプラグインは内部的に再起動を要求する場合があります。その場合は、プラグイン固有の手順に従ってください。
- 設定ファイル（`settings.json`）への変更も即時反映されるようになっています。

## 関連情報

- [Claude Code プラグイン開発ガイド](https://docs.anthropic.com/ja/docs/claude-code/plugins)
- [Claude Code スキル（カスタムコマンド）](https://docs.anthropic.com/ja/docs/claude-code/slash-commands)
- [Claude Code フックの設定](https://docs.anthropic.com/ja/docs/claude-code/hooks)
