---
title: "Task(agent_type)によるエージェント生成制限の追加"
date: 2026-02-06
tags: [task-tool, agents, security]
---

## 原文（日本語に翻訳）

特定のエージェントタイプの生成を防ぐTask(agent_type)制限を追加しました。

## 原文（英語）

Added Task(agent_type) spawning restriction to prevent certain agent types from being spawned

## 概要

Taskツールで特定のエージェントタイプの生成を制限できる機能が追加されました。これにより、セキュリティやリソース管理の観点から、特定のエージェントタイプの使用を禁止できるようになります。

## 基本的な使い方

設定ファイルでエージェントタイプを制限します。

```json
// settings.json
{
  "disallowedTools": [
    "Task(Explore)",
    "Task(terraform-engineer)"
  ]
}
```

## 実践例

### 特定のエージェントタイプの禁止

リソース消費の大きいエージェントを禁止する場合。

```json
// .claude/settings.json
{
  "disallowedTools": [
    "Task(Explore)",  // Exploreエージェントを禁止
    "Task(Plan)"      // Planエージェントを禁止
  ]
}
```

```bash
claude

# Claudeが禁止されたエージェントを使おうとすると
# 自動的に別のアプローチを試みる
```

### プロジェクト固有の制限

特定のプロジェクトでのみエージェントを制限する場合。

```json
// .claude/settings.json（プロジェクトレベル）
{
  "disallowedTools": [
    "Task(terraform-engineer)",  // インフラ変更を禁止
    "Task(deployment-engineer)"  // デプロイを禁止
  ]
}
```

### CLIフラグによる一時的な制限

コマンドライン引数で一時的に制限する場合。

```bash
# 特定のエージェントタイプを禁止して起動
claude --disallowedTools "Task(Explore),Task(cloud-architect)"

# このセッション中のみ有効
```

### すべてのサブエージェントの禁止

すべてのTaskツール使用を禁止する場合。

```json
// settings.json
{
  "disallowedTools": [
    "Task"  // すべてのサブエージェント生成を禁止
  ]
}
```

## 注意点

- `Task(agent_type)` の形式で特定のエージェントタイプを指定します
- `Task` だけを指定すると、すべてのサブエージェントが禁止されます
- エージェントタイプ名は大文字小文字を区別します
- 設定はプロジェクトレベル、ユーザーレベル、または管理設定で適用できます
- 禁止されたエージェントを使おうとすると、Claudeは代替手段を試みます

## 関連情報

- [Task Tool公式ドキュメント](https://code.claude.com/docs/en/tools)
- [カスタムエージェント](https://code.claude.com/docs/en/agents)
- [設定ガイド](https://code.claude.com/docs/en/settings)
