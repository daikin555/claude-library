---
title: "日本語IMEの全角数字入力に対応"
date: 2026-01-28
tags: ['新機能', '日本語対応', 'IME']
---

## 原文（日本語に翻訳）

オプション選択プロンプトで日本語IMEからの全角（ぜんかく）数字入力をサポート

## 原文（英語）

Added support for full-width (zenkaku) number input from Japanese IME in option selection prompts

## 概要

Claude Codeのオプション選択画面で、日本語IMEを使用した全角数字の入力がサポートされました。これにより、日本語入力モードのまま数字を入力しても、半角数字と同様に選択肢を選ぶことができるようになります。日本語を頻繁に使用するユーザーにとって、IMEの切り替えが不要になり、より快適な操作が可能になります。

## 基本的な使い方

オプション選択のプロンプトが表示された際に、日本語IMEがオンになっている状態でも数字を入力できます。

```bash
# 例：AskUserQuestionツールで選択肢が表示された場合
? 選択してください:
  1) オプション1
  2) オプション2
  3) オプション3
>
```

日本語IMEで「1」（全角）を入力すると、自動的に半角の「1」として認識され、対応する選択肢が選ばれます。

## 実践例

### 日本語環境での選択操作

日本語でドキュメントを書いている最中に、Claude Codeから質問が表示された場合：

```
? ファイルをどこに配置しますか？
  1) src/components/
  2) src/pages/
  3) src/utils/
```

従来は、日本語入力モードをオフにして半角数字を入力する必要がありましたが、v2.1.21以降は日本語入力モードのまま「1」「2」「3」（全角）を入力しても正常に動作します。

### 複数選択での利用

マルチセレクトオプションでも全角数字が使用できます：

```
? 有効にする機能を選択してください（複数選択可）:
  1) ダークモード
  2) 自動保存
  3) 構文ハイライト
  4) コード補完
```

「1、3、4」（全角カンマ区切り）のような入力も受け付けられます。

### コマンドラインでの対話

Claude Codeとの対話中、日本語でコメントを書きながらオプションを選択する際、IMEの切り替えが不要になるため、作業フローが中断されません。

## 注意点

- この機能はv2.1.21で導入されました
- 全角数字は自動的に半角数字に変換されて処理されます
- 日本語IME以外の環境では従来通り半角数字を使用してください
- すべての日本語IME（Microsoft IME、Google日本語入力、ATOKなど）で動作します
- 数字以外の全角文字（例：全角アルファベット）には対応していません

## 関連情報

- [Claude Code 公式ドキュメント](https://code.claude.com/docs/)
- [Changelog v2.1.21](https://github.com/anthropics/claude-code/releases/tag/v2.1.21)
- [日本語環境でのClaude Code活用ガイド](https://code.claude.com/docs/)
