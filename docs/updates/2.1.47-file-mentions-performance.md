---
title: "@ファイルメンション機能のパフォーマンス改善"
date: 2026-02-19
tags: [performance, file-mentions, indexing, caching]
---

## 原文（日本語に翻訳）

`@` ファイルメンションのパフォーマンスを改善しました。起動時にインデックスをウォームアップし、バックグラウンド更新を伴うセッションベースのキャッシュを使用することで、ファイルの候補がより速く表示されるようになりました。

## 原文（英語）
Improved performance of `@` file mentions - file suggestions now appear faster by pre-warming the index on startup and using session-based caching with background refresh.

## 概要

Claude Codeで`@`を入力してファイルを参照する際の補完速度が大幅に改善されました。起動時にファイルインデックスを事前にウォームアップし、セッション中はキャッシュを活用してバックグラウンドで更新するアーキテクチャに変更されました。大規模なプロジェクトでも`@`ファイルメンションの候補が素早く表示されるようになります。

## 基本的な使い方

```bash
# Claude Codeのプロンプトで @ を入力すると
# ファイル候補がより速く表示される

claude
> @src/  # ← ここでファイル候補が表示される（改善後は高速）
> @package.json でプロジェクト構成を確認してください
```

## 実践例

### ユースケース1: 大規模プロジェクトでのファイル参照

```bash
# 数千ファイルを含む大規模プロジェクト
# 修正前: @を入力後、候補表示まで数秒かかることがあった
# 修正後: インデックスがウォームアップ済みのため即座に候補表示

claude
> @src/components/  # 大量のコンポーネントファイルも高速表示
> @tests/unit/      # テストファイルも素早く候補に出る
```

### ユースケース2: 複数ファイルを参照した作業

```bash
# 複数のファイルを順番に参照する場合
# セッションベースのキャッシュにより2回目以降が高速

claude
> @src/auth.ts と @src/user.ts の関係を説明してください
# 1回目のファイル候補表示も高速
> @src/middleware/  # 2回目以降はキャッシュが効いてさらに高速
```

### ユースケース3: バックグラウンド更新による最新状態の維持

```bash
# ファイルを追加・削除した場合の自動更新
# バックグラウンドで更新が実行されるため、
# 操作中に遅延が発生しない

# 新しいファイルを作成後
touch src/new-feature.ts

# 次回@メンション時には新しいファイルも候補に含まれる
claude
> @src/new-feature.ts を編集してください
```

## 注意点

- インデックスのウォームアップは起動時にバックグラウンドで実行されます
- 非常に大規模なプロジェクト（数万ファイル以上）では、初回起動時のウォームアップに時間がかかる場合があります
- セッションベースのキャッシュはセッションをまたいでは保持されません
- バックグラウンド更新によりファイルの変更が自動的にインデックスに反映されますが、即時反映ではない場合があります
- `.gitignore`や`.claudeignore`で除外されたファイルはインデックスに含まれません

## 関連情報

- [Claude Code ファイル参照の使い方](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
