---
title: "オートメモリ機能：Claudeが自動的にコンテキストを保存する"
date: 2026-02-26
tags: [memory, auto-memory, context, persistence]
---

## 原文（日本語に翻訳）

Claudeが有用なコンテキストをオートメモリに自動的に保存するようになりました。`/memory` コマンドで管理できます。

## 原文（英語）

Claude automatically saves useful context to auto-memory. Manage with /memory

## 概要

オートメモリは、Claude Codeがセッション間を通じて学習内容・プロジェクトのパターン・コマンドの好み・作業スタイルなどを自動的に記録・保存する機能です。ユーザーが手動でCLAUDE.mdを編集する必要なく、Claudeが自分自身で記録を蓄積し、次回のセッションから活用できます。`/memory` コマンドを使って、保存された内容の確認や機能の有効/無効の切り替えができます。

## 基本的な使い方

### オートメモリの管理

```bash
# /memoryコマンドでオートメモリを管理
/memory
```

コマンドを実行すると、現在保存されているメモリの内容確認や、オートメモリの有効/無効の切り替えが対話的に行えます。

### 環境変数での制御

```bash
# オートメモリを無効化
export CLAUDE_CODE_DISABLE_AUTO_MEMORY=1

# オートメモリを有効化（デフォルト）
export CLAUDE_CODE_DISABLE_AUTO_MEMORY=0
```

### 保存先ディレクトリ

オートメモリはプロジェクトごとに以下のパスに保存されます：

```
~/.claude/projects/<project>/memory/
├── MEMORY.md          # 簡潔なインデックス（全セッションで読み込まれる）
├── debugging.md       # デバッグパターンの詳細メモ
├── api-conventions.md # API設計の決定事項
└── ...
```

## 実践例

### プロジェクトのパターンを自動学習させる

Claudeと作業を続けるだけで、プロジェクト固有の慣習を学習します：

```bash
# 通常通り作業する
# Claudeが自動的に以下を記録します：
# - よく使うコマンド
# - コーディングスタイル
# - プロジェクト固有の設定
# - 繰り返し出現するパターン
```

### メモリ内容の確認

```bash
# 現在のメモリ内容を確認
/memory

# または直接ファイルを確認
cat ~/.claude/projects/<project>/memory/MEMORY.md
```

### CLAUDE.mdとオートメモリの使い分け

| 項目 | CLAUDE.md | オートメモリ（MEMORY.md） |
|------|-----------|--------------------------|
| 書き手 | ユーザー（開発者） | Claude自身 |
| 目的 | 指示・ルール | 学習パターン・洞察 |
| Gitで管理 | 可能（プロジェクトに含める） | ローカルのみ |
| セッション開始時の読み込み | 全文 | 最初の200行のみ |

### 複数のgitワークツリーでの使用

```bash
# worktreeごとに独立したメモリが保存される
git worktree add ../feature-branch feature-branch
cd ../feature-branch
# → 別のメモリディレクトリが使用される
```

## 注意点

- **200行制限**: `MEMORY.md` はセッション開始時に最初の200行のみ読み込まれます。それ以上は警告とともに切り捨てられるため、インデックス形式で管理し、詳細は別ファイルに分けることが推奨されます
- **ローカル専用**: オートメモリはローカルにのみ保存され、Gitのバージョン管理に含まれません。チームでの共有にはCLAUDE.mdを使用してください
- **git repoとの関連**: メモリはgitリポジトリのルートに基づいて管理されます。リポジトリ外では作業ディレクトリが使われます
- **worktreeの分離**: gitワークツリーごとに独立したメモリディレクトリが作成されます

## 関連情報

- [Claude Code公式ドキュメント - メモリ管理](https://code.claude.com/docs/en/memory)
- [Claude Codeのオートメモリとフック（英語ブログ）](https://yuanchang.org/en/posts/claude-code-auto-memory-and-hooks/)
- [CLAUDE.mdメモリシステム - SFEIR Institute](https://institute.sfeir.com/en/claude-code/claude-code-memory-system-claude-md/tutorial/)
