---
title: "Ctrl+Oトランスクリプトモードでリアルタイム思考ブロックを表示"
date: 2026-01-31
tags: ['新機能', 'デバッグ', 'UX']
---

## 原文（日本語に翻訳）

Ctrl+Oトランスクリプトモードにリアルタイム思考ブロック表示を追加しました

## 原文（英語）

Added real-time thinking block display in Ctrl+O transcript mode

## 概要

Claude Code v2.1.0で導入された、Claudeの思考プロセスの可視化機能です。`Ctrl+O`でトランスクリプトモードを開くと、Claudeが応答を生成している最中の思考ブロック（`<thinking>`タグ内の内容）がリアルタイムで表示されます。これにより、Claudeが何を考えているか、どのように問題を分析しているかを即座に確認でき、デバッグや学習に役立ちます。

## 基本的な使い方

Claude Codeの実行中に `Ctrl+O` を押してトランスクリプトモードを開きます。

```bash
claude

> この複雑な関数をリファクタリングして

# Ctrl+O を押す
# トランスクリプトモードが開く

# Claudeの応答生成中、リアルタイムで思考プロセスが表示される:
<thinking>
まず、この関数が何をしているか分析する必要がある...
ネストが深いので、小さな関数に分割すべき...
エラーハンドリングが不足している...
</thinking>

# 思考ブロックが完了すると、実際の応答が続く
```

## 実践例

### 複雑な問題の分析プロセスを観察

Claudeがどのように問題を分解しているかをリアルタイムで確認します。

```bash
> このバグの原因を特定して

# Ctrl+O でトランスクリプトモード

# リアルタイム表示:
<thinking>
エラーメッセージから、null参照の可能性がある...
ファイルを読んで、該当箇所を確認する必要がある...
同様のパターンが他にもないか検索すべき...
まずsrc/utils/helper.jsを読む...
</thinking>

# → Read tool call
# → Grep tool call
# （実際のツール使用が続く）
```

### プランモードでの思考プロセス確認

プラン作成時の判断基準を理解します。

```bash
> /plan
> 認証機能を追加

# Ctrl+O

<thinking>
認証には複数のアプローチがある:
1. JWT - ステートレス、スケーラブル
2. Session - サーバー側管理、セキュア
3. OAuth - サードパーティ連携

このプロジェクトはRESTful APIなので、JWTが適している...
必要なファイル:
- src/middleware/auth.js（新規）
- src/routes/auth.js（新規）
- src/models/User.js（新規）
- package.json（jwt依存関係追加）
</thinking>

# → 詳細なプランが生成される
```

### デバッグ時の推論過程を追跡

Claudeがどのように問題を絞り込んでいるかを観察します。

```bash
> テストが失敗する原因を調べて

# Ctrl+O

<thinking>
まずエラーメッセージを確認...
"Expected 200, got 404" - ルーティングの問題か？
テストファイルを読んで、どのエンドポイントをテストしているか確認...
実際のルート定義と比較する必要がある...
</thinking>

# → Read test file
# → Read route file
# → 問題特定と修正提案
```

### パフォーマンス最適化の判断基準

最適化の優先順位をどう決めているか確認します。

```bash
> このコードを最適化して

# Ctrl+O

<thinking>
パフォーマンスボトルネックを特定する...
ループ内でDB呼び出しがある - N+1問題の可能性...
これが最大の問題。他の最適化より優先すべき...
バッチクエリに変更することで大幅に改善できる...
</thinking>

# → 最適化コードを生成
```

## 注意点

- この機能は Claude Code v2.1.0（2026年1月7日リリース）で導入されました
- トランスクリプトモードの開き方:
  - `Ctrl+O`: トランスクリプトモードを開く/閉じる（トグル）
- 思考ブロックの表示:
  - **リアルタイム**: Claudeが思考を生成している最中に即座に表示
  - **ストリーミング**: 文字が順次表示される（タイピング効果）
  - **完了後も保持**: 思考プロセス完了後も表示され、スクロールして確認可能
- トランスクリプトモードのタブ:
  - **[Messages]**: ユーザーとClaudeのメッセージ
  - **[Thinking]**: 思考ブロックのみ表示
  - **[Context]**: 現在のコンテキスト情報
  - **[Full]**: すべて（メッセージ、思考、ツール呼び出し）
  - 左右矢印キー（`←` / `→`）でタブ切り替え
- 思考ブロックの内容:
  - Claudeの内部推論プロセス
  - 問題分析、戦略立案、判断基準
  - ツール使用の理由
  - 代替案の検討
- 利用シーン:
  - **デバッグ**: Claudeがなぜそのツールを選んだか理解
  - **学習**: Claudeの問題解決アプローチを学ぶ
  - **検証**: Claudeの判断が正しいか確認
  - **改善**: プロンプトの改善点を発見
- パフォーマンスへの影響:
  - 思考ブロックの表示自体は軽量
  - トランスクリプトモードを開いてもClaude の処理速度は変わらない
- プライバシー:
  - 思考ブロックはローカルに表示されるのみ
  - ログファイルには保存される（`--debug`モード時）
- 思考ブロックが表示されない場合:
  - シンプルなタスクでは思考ブロックが生成されないことがある
  - モデルの判断により、思考プロセスが省略される場合がある
- キーボードショートカット:
  - `Ctrl+O`: トランスクリプトモードトグル
  - `←` / `→`: タブ切り替え
  - `↑` / `↓`: スクロール
  - `Esc`: トランスクリプトモードを閉じる

## 関連情報

- [Interactive mode - Claude Code Docs](https://code.claude.com/docs/en/interactive-mode)
- [Debugging with Claude Code](https://code.claude.com/docs/en/debugging)
- [Understanding Claude's reasoning](https://www.anthropic.com/research/extended-thinking)
