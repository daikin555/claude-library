---
title: "ストリーム中の中断時のAPIエラーを修正"
date: 2026-02-06
tags: [api, bugfix, streaming]
---

## 原文（日本語に翻訳）

ストリーミング中に中断した際に発生するAPIエラーを修正しました。

## 原文（英語）

Fixed API error when aborting mid-stream

## 概要

Claude Codeがストリーミング応答を受信している最中にユーザーが中断操作（Escキーなど）を行った際、APIエラーが発生していた問題が修正されました。この修正により、ストリーミング中でも安全に中断できるようになります。

## 基本的な使い方

ストリーミング応答中にEscキーを押すことで、安全に中断できます。

```bash
claude

# Claudeが応答中
# Escキーで中断
# エラーなく中断される
```

## 実践例

### 長い応答の中断

Claudeの応答が長すぎる場合に中断します。

```bash
# 大量のコードを生成中
"すべてのファイルにログ機能を追加してください"

# 応答が不要と判断した場合
# Escキーで中断
# 修正前：API error が発生
# 修正後：クリーンに中断される
```

### 方向転換

応答の途中で別のアプローチに変更したい場合。

```bash
# 最初の指示
"Reactでコンポーネントを実装してください"

# 応答中に方向転換
# Escキーで中断
# 新しい指示を送信
"やはりVueで実装してください"
```

### エラーハンドリング

中断後も正常にセッションを継続できます。

```bash
# ストリーミング中に中断
# セッションは維持される
# 次のプロンプトを入力可能
```

## 注意点

- Escキーで応答を中断できます
- 中断してもセッションは終了しません
- 中断後すぐに次のプロンプトを入力できます
- ストリーミング応答中の中断は、トークンの無駄を防ぐのに役立ちます

## 関連情報

- [Claude Code 基本操作](https://code.claude.com/docs/en/getting-started)
- [キーボードショートカット](https://code.claude.com/docs/en/keybindings)
