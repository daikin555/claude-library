---
title: "Windowsでドライブレターの大文字小文字が異なるworktreeセッションのマッチング修正"
date: 2026-02-19
tags: [bug-fix, windows, worktree, session, path]
---

## 原文（日本語に翻訳）

Windows: ドライブレターの大文字小文字が異なる場合のworktreeセッションマッチングを修正しました（anthropics/claude-code#26123）

## 原文（英語）
Windows: fixed worktree session matching when drive letter casing differs (anthropics/claude-code#26123)

## 概要

Windowsでは、ファイルパスのドライブレター（`C:` vs `c:`など）の大文字小文字が混在することがあります。この違いによって、git worktreeを使用している場合にClaude Codeがセッションを正しくマッチングできない問題がありました。この修正により、ドライブレターの大文字小文字を問わずworktreeセッションが正しく識別されるようになります。

## 基本的な使い方

この修正はWindows環境でgit worktreeを使用している場合に自動的に適用されます。特別な設定は不要です。

```powershell
# Windowsでのgit worktree使用例
git worktree add C:\projects\myapp-feature feature-branch

# または小文字のドライブレターを使用する環境
git worktree add c:\projects\myapp-feature feature-branch

# どちらの場合でもClaude Codeがセッションを正しくマッチング（修正後）
cd C:\projects\myapp-feature
claude --resume
```

## 実践例

### ユースケース1: worktreeを使った並行開発

複数のブランチを同時に開発する際にworktreeを使用し、Windowsで作業する場合。

```powershell
# メインリポジトリ
cd C:\projects\myapp

# worktreeを作成（大文字のドライブレター）
git worktree add C:\projects\myapp-feature-auth feature/authentication
git worktree add C:\projects\myapp-bugfix bugfix/login-error

# 各worktreeでClaude Codeを起動
# ターミナル1
cd C:\projects\myapp-feature-auth
claude
> /rename "認証機能開発"

# ターミナル2
cd C:\projects\myapp-bugfix
claude
> /rename "ログインバグ修正"
```

### ユースケース2: ドライブレターの大文字小文字が混在する環境

ツールによってパスの大文字小文字が異なる場合の対処。

```powershell
# Windows Subsystem for Linux (WSL) などからのパスマウント
# Windowsパス: C:\projects\myapp
# WSLからのパス: /mnt/c/projects/myapp

# PowerShellで起動した場合 (C:)
cd C:\projects\myapp
claude
> /rename "メインプロジェクト"

# コマンドプロンプトで起動した場合 (c:)
cd c:\projects\myapp
claude --resume
# 修正後: "メインプロジェクト" セッションが正しく表示される
# 修正前: セッションが見つからなかった
```

### ユースケース3: CI/CD環境でのWorktree使用

Windows上のCIパイプラインでworktreeを使いClaude Codeを実行する場合。

```powershell
# GitHub Actions や Azure Pipelines での例
# パスが環境によって大文字小文字が異なる場合でも正常動作

# CI環境変数
$env:WORKSPACE = "D:\a\myapp\myapp"  # 大文字のD

# worktreeの作成
git worktree add "$env:WORKSPACE-feature" feature-branch

# Claude Codeのヘッドレス実行（修正後は正しくセッションマッチング）
claude --headless "このブランチの変更内容をレビューしてください"
```

## 注意点

- この修正はWindows環境にのみ適用されます。macOSやLinuxのファイルシステムは大文字小文字を区別するため影響を受けません。
- git worktreeを使用していない場合は、この修正による影響はありません。
- Windowsではファイルシステムが大文字小文字を区別しないため、`C:` と `c:` は同じパスを指します。
- WSL（Windows Subsystem for Linux）環境での動作については、パスのマッピングに注意が必要です。
- このIssue（#26123）では、再開ピッカーの表示件数増加修正も同時に行われています。

## 関連情報

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [GitHub Issue #26123](https://github.com/anthropics/claude-code/issues/26123)
- [Git Worktree 公式ドキュメント](https://git-scm.com/docs/git-worktree)
- [Claude Code on Windows](https://docs.anthropic.com/ja/docs/claude-code/overview)
