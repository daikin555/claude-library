---
title: "スラッシュコマンド出力がシステムメッセージとして正しく表示されるよう修正"
date: 2026-02-28
tags: [slash-commands, ui, bug-fix]
---

# スラッシュコマンド出力がシステムメッセージとして正しく表示されるよう修正

## 原文（日本語に翻訳）

/cost などのローカルスラッシュコマンドの出力が、UIでユーザー送信メッセージとして表示されていた問題を修正しました。

## 原文（英語）

Fixed local slash command output like /cost appearing as user-sent messages instead of system messages in the UI

## 概要

v2.1.63以前では、`/cost` などのローカルスラッシュコマンドを実行した際、その出力がUIでユーザーが送信したメッセージとして誤って表示されていました。この修正により、スラッシュコマンドの出力は正しくシステムメッセージとして表示されるようになりました。会話履歴の視認性と明確さが向上します。

## 基本的な使い方

### /cost コマンドの使用例

```
/cost
```

修正後は、コスト情報がシステムメッセージとして適切なスタイルで表示されます（ユーザーメッセージと混同されなくなります）。

## 実践例

### コスト確認時の表示改善

```
ユーザー: コードを実装してください
Claude: [実装を行う]

# /cost を実行
/cost

# 修正前：ユーザーメッセージとして表示されていた
# 修正後：システムメッセージとして適切に表示される
```

### 他のローカルスラッシュコマンドにも適用

この修正は `/cost` に限らず、ローカルで実行されるすべてのスラッシュコマンドの出力に適用されます：

```
/status    # ステータス確認
/cost      # コスト確認
```

## 注意点

- この修正はUI表示に関するものであり、コマンドの機能自体には影響しません
- 修正後の会話履歴では、システムメッセージはユーザーメッセージとは異なるスタイルで表示されます

## 関連情報

- [Claude Code スラッシュコマンド](https://docs.anthropic.com/ja/docs/claude-code/slash-commands)
