---
title: "起動時に .claude.json.backup ファイルが大量に蓄積される問題の修正"
date: 2026-02-17
tags: [bugfix, backup, storage, startup, filesystem]
---

## 原文（日本語に翻訳）

起動のたびに `.claude.json.backup` ファイルが過剰に蓄積する問題を修正

## 原文（英語）

Fixed excessive `.claude.json.backup` files accumulating on every startup

## 概要

Claude Code を起動するたびに `.claude.json.backup` ファイルが不必要に生成・蓄積されてしまうバグが修正されました。このファイルは設定のバックアップとして作成されますが、修正前は毎回新しいバックアップファイルが生成され、ディスク容量を不必要に消費していました。2.1.45 では起動時の不要なバックアップ生成が抑制され、ディスク使用量が最小限に保たれるようになります。

## 基本的な使い方

この修正はバグフィックスです。Claude Code を 2.1.45 以上にアップデートするだけで適用されます。

```bash
# Claude Code をアップデート
npm update -g @anthropic-ai/claude-code
```

## 実践例

### 蓄積したバックアップファイルを確認・削除する

修正前に蓄積してしまった `.claude.json.backup` ファイルを確認・整理する方法：

```bash
# バックアップファイルの一覧を確認
ls -la ~/.claude/.claude.json.backup* 2>/dev/null || echo "バックアップファイルなし"

# または find コマンドで確認
find ~ -name ".claude.json.backup*" -type f 2>/dev/null

# ディスク使用量を確認
du -sh ~/.claude/ 2>/dev/null
```

古いバックアップファイルを削除する場合（最新のもの以外）：

```bash
# 最新の1つを残してその他を削除（慎重に実行してください）
ls -t ~/.claude/.claude.json.backup* 2>/dev/null | tail -n +2 | xargs rm -f
```

### 修正後の正常な動作

```bash
# 2.1.45 以降では、起動ごとにバックアップが増えなくなります
claude  # 起動1回目
claude  # 起動2回目
claude  # 起動3回目

# バックアップファイルは適切な数に保たれます
ls ~/.claude/.claude.json.backup* 2>/dev/null | wc -l
# → 1 または少数
```

## 注意点

- 修正前に大量のバックアップファイルが蓄積している場合、アップデート後も既存ファイルは自動削除されません。手動で整理が必要な場合があります。
- `.claude.json` は Claude Code の設定ファイルです。削除・編集する前に内容を確認してください。
- バックアップファイルを誤って削除しても、Claude Code の動作には影響しません（設定自体は `.claude.json` に保存されています）。
- このバグは主に Claude Code を頻繁に再起動する開発者に影響していました。

## 関連情報

- [Claude Code 設定ファイルについて](https://docs.anthropic.com/ja/docs/claude-code/settings)
- [Claude Code データ管理](https://docs.anthropic.com/ja/docs/claude-code)
