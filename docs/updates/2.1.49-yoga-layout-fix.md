---
title: "古いYogaレイアウト参照による描画バグを修正"
date: 2026-02-22
tags: [bug-fix, rendering, tui, yoga]
---

## 原文（日本語に翻訳）

古いYogaレイアウト参照によって引き起こされていた潜在的な描画問題を修正しました。

## 原文（英語）

Fixed potential rendering issues caused by stale yoga layout references

## 概要

Claude CodeのTUI（テキストユーザーインターフェース）のレイアウト計算に使用しているYogaライブラリ（Metaが開発したFlexboxレイアウトエンジン）において、古い（stale）参照が原因で描画が崩れる問題が修正されました。これにより、ターミナル上のUIが正しく描画されるようになります。

## 基本的な使い方

この修正はバックグラウンドで自動的に適用されます。特別な操作は不要です。

```bash
# 通常どおりClaudeを起動するだけで修正が適用されます
claude
```

## 実践例

### ユースケース1: 長時間セッションでの描画安定性

```bash
# 長時間使用しているセッションで描画が崩れていた場合
# 修正後は安定した描画が継続します

claude
# → 長時間使用しても UI が正しく描画される
```

### ユースケース2: ウィンドウサイズ変更後の描画

```bash
# ターミナルウィンドウのサイズを変更した後
# 以前: レイアウトが崩れることがあった
# 修正後: 正しくリサイズに対応

# ターミナルウィンドウをリサイズ
# → Yogaレイアウトが正しく再計算されUI が正しく表示される
```

### ユースケース3: 複数のUI要素が同時に更新される場合

```bash
# エージェントが複数のツールを同時に使用している場合など
# UI要素が頻繁に更新される状況での安定性が向上
claude "複数のファイルを並行して解析してください"
# → 進捗表示などが正しく描画される
```

## 注意点

- この修正はTUIの内部実装に関するものであり、機能的な変更はありません。
- Yogaレイアウトエンジンはターミナル上のFlexboxレイアウト計算に使用されており、パフォーマンスにも影響します。
- 描画の問題が発生していた場合、バージョンアップ後に自動的に解消されます。

## 関連情報

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Yoga Layout Engine (Meta)](https://www.yogalayout.dev/)
- [YogaWASMメモリ修正](./2.1.49-yoga-wasm-memory-fix.md)
