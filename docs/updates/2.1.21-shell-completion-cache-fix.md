---
title: "シェル補完キャッシュファイルの切り詰め問題を修正"
date: 2026-01-28
tags: [bugfix, shell, completion, cache]
---

## 原文（日本語訳）
終了時にシェル補完キャッシュファイルが切り詰められる問題を修正しました

## 原文（英語）
Fixed shell completion cache files being truncated on exit

## 概要
Claude Code の終了時にシェル補完キャッシュファイルが破損する問題が修正されました。この修正により、ターミナルでのタブ補完機能が正常に動作し続けます。

## 実践例

### 安定したタブ補完の利用

```bash
# Claude Code 使用後もシェル補完が正常に動作
claude
> プロジェクトを分析してください

# 終了後、別のシェルセッションで
cd /path/to/pr[TAB]
# → /path/to/project/ に正しく補完される
```

## 注意点

- **自動修正**: この問題は自動的に修正され、ユーザー側の操作は不要です
- **既存のキャッシュ**: すでに破損したキャッシュファイルがある場合は、シェルを再起動すると再生成されます
- **パフォーマンス**: キャッシュが正常に保存されることで、補完のパフォーマンスが向上します

## 関連情報

- [Claude Code Changelog - v2.1.21](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Shell Completion Documentation](https://github.com/wbingli/zsh-claudecode-completion)
