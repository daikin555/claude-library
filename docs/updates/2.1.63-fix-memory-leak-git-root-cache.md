---
title: "長時間セッションで際限なく増加するgitルート検出キャッシュのメモリリーク修正"
date: 2026-02-28
tags: [bug-fix, memory, git, cache, performance]
---

# 長時間セッションで際限なく増加するgitルート検出キャッシュのメモリリーク修正

## 原文（日本語に翻訳）

長時間セッションで際限なく増加するgitルート検出キャッシュのメモリリークを修正しました。

## 原文（英語）

Fixed memory leak in git root detection cache that could cause unbounded growth in long-running sessions

## 概要

Claude Code v2.1.63で、gitリポジトリのルートディレクトリを検出するためのキャッシュのメモリリークが修正されました。長時間セッション中に多数のファイルやディレクトリを操作すると、このキャッシュが際限なく増加してメモリを消費する問題がありました。大規模なプロジェクトや長時間の作業セッションで特に顕著でした。

## 基本的な使い方

この修正はバックグラウンドで自動的に適用されます。ユーザー側での操作は不要です。

## 実践例

### 影響を受けるシナリオ

- 多数のファイルにわたって作業する長時間セッション
- モノレポなど複数のgitルートを持つプロジェクト
- 多数のディレクトリを横断するリファクタリング作業

### 修正後の改善

```
# 長時間セッションでのメモリ使用量の変化（概念図）
修正前：
時間 → ファイル操作増加 → キャッシュ無制限増加 → メモリ枯渇リスク

修正後：
時間 → ファイル操作増加 → キャッシュ適切管理 → メモリ使用量安定
```

## 注意点

- v2.1.63にアップデートすることで自動的に修正が適用されます
- 大規模なリポジトリで長時間作業するユーザーに特に効果があります

## 関連情報

- [Claude Code ファイル操作](https://docs.anthropic.com/ja/docs/claude-code/tools)
