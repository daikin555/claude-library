---
title: "/modelコマンドの即時実行（キューイング廃止）"
date: 2026-02-03
tags: [model, command, ux, improvement]
---

# /modelコマンドの即時実行（キューイング廃止）

## 原文（日本語に翻訳）
/modelコマンドをキューに入れるのではなく、即座に実行するように変更しました。

## 原文（英語）
Changed `/model` to execute immediately instead of being queued

## 概要
モデル選択コマンド `/model` が、以前はメッセージキューに追加されて順番待ちしていましたが、即座に実行されるように変更されました。これにより、モデルの切り替えがより直感的かつ高速になりました。

## 基本的な使い方

### 即座のモデル切り替え
```bash
claude

# Sonnet 4.5で作業中
> "このコードを説明して"

# モデルを切り替え
/model

# 以前の動作:
# - /modelがキューに追加される
# - 前のリクエストが完了するまで待機
# - その後、モデル選択画面が表示される

# 改善後の動作:
# - /model が即座に実行される
# - すぐにモデル選択画面が表示される
# - 待ち時間なし
```

### モデル選択画面
```bash
/model

# 即座に表示:
┌─────────────────────────────────────┐
│ Select Model                        │
├─────────────────────────────────────┤
│ › Claude Sonnet 4.5 (default)       │
│   Claude Opus 4.5                   │
│   Claude Haiku 4                    │
│   Claude Sonnet 3.5                 │
└─────────────────────────────────────┘

# モデル選択 → すぐに適用
```

## 実践例

### タスク途中でのモデル変更
複雑なタスクの途中でモデルを切り替え：

```bash
claude

# Haikuで高速プロトタイピング
/model
# → Haiku 4 を選択

> "簡単なCRUDアプリを作って"
# 高速に基本的な実装が完成

# より高度な機能にはOpusを使用
/model
# → Opus 4.5 を選択（即座に切り替え）

> "複雑なバリデーションロジックを追加して"
# Opusがより洗練された実装を提供

# 以前の問題:
# - /modelがキューに入り、Haikuの応答が完了するまで待つ必要
# - モデル切り替えに数十秒かかる

# 改善後:
# - どのタイミングでも即座に切り替え可能
# - 作業の流れが中断されない
```

### ストリーミング中のモデル変更
応答生成中でも切り替え可能：

```bash
> "この大規模なリファクタリングを計画して"

# Sonnet 4.5が応答を生成中...
# （長い応答が流れている）

# 途中でOpusに切り替えたい
/model

# 以前:
# - 応答が完全に終わるまで待つ必要
# - その後、キューから/modelが実行される

# 改善後:
# - 即座にモデル選択画面が表示
# - 現在の応答は継続（または中断して新モデルで再開）
```

### パフォーマンステスト
異なるモデルでの応答速度を比較：

```bash
# テスト1: Haiku
/model  # 即座に切り替え
# → Haiku 4

> "このコードを最適化して"
# 応答時間: 2秒

# テスト2: Sonnet
/model  # 即座に切り替え
# → Sonnet 4.5

> "このコードを最適化して"
# 応答時間: 5秒

# テスト3: Opus
/model  # 即座に切り替え
# → Opus 4.5

> "このコードを最適化して"
# 応答時間: 10秒

# 各切り替えが即座に行われるため、比較がスムーズ
```

### コスト最適化ワークフロー
タスクに応じて最適なモデルを使い分け：

```bash
# ステップ1: 調査（Haiku - 低コスト）
/model  # → Haiku 4

> "このプロジェクトの構造を教えて"
> "主要なファイルを一覧して"

# ステップ2: 設計（Sonnet - バランス）
/model  # → Sonnet 4.5

> "新機能の実装計画を立てて"

# ステップ3: 実装（Sonnet）
> "計画に基づいて実装して"

# ステップ4: 高度なレビュー（Opus - 高品質）
/model  # → Opus 4.5

> "実装をレビューして、潜在的な問題を指摘して"

# すべての切り替えが即座に行われ、ワークフローが滑らか
```

### エラーリカバリー
モデルの応答が期待と異なる場合、即座に変更：

```bash
> "この複雑なアルゴリズムを実装して"

# Sonnetの応答が期待に満たない
# すぐにOpusに切り替え

/model
# → Opus 4.5

> "同じタスクをもう一度、より洗練された方法で"

# 待ち時間なく再実行可能
```

### 設定の確認と変更
現在のモデル設定を確認：

```bash
# 現在のモデルを確認
/model

# 表示:
# Current: Claude Sonnet 4.5
#
# Available models:
# › Claude Sonnet 4.5 (current)
#   Claude Opus 4.5
#   Claude Haiku 4
#   ...

# Escで閉じる、または別のモデルを選択
```

## 注意点

- **即時実行の意味**: コマンドがメッセージキューをバイパスし、優先的に処理されること。他のリクエストの完了を待ちません。

- **応答生成中の切り替え**: 応答生成中に `/model` を実行した場合、現在の応答は継続されますが、次のリクエストから新しいモデルが使用されます。

- **セッション単位の設定**: モデル選択はセッション単位で保持されます。新しいセッションを開始すると、デフォルトモデル（通常はSonnet 4.5）が使用されます。

- **デフォルトモデルの設定**: グローバルなデフォルトモデルを設定したい場合：
  ```json
  // ~/.claude/settings.json
  {
    "defaultModel": "claude-opus-4-5-20251101"
  }
  ```

- **モデル別の特性**:
  - **Haiku 4**: 最高速、低コスト、シンプルなタスク向け
  - **Sonnet 4.5**: バランス型、ほとんどのタスクに最適
  - **Opus 4.5**: 最高品質、複雑な推論が必要なタスク向け

- **コスト管理**: モデルごとに料金が異なります。頻繁に切り替える場合、コストに注意してください。

- **プロンプトキャッシング**: モデルを切り替えると、プロンプトキャッシュは無効化されます。同じモデルを使い続ける方がキャッシュ効率が良くなります。

- **API制限**: 各モデルには独立したレート制限があります。特定のモデルのレート制限に達した場合、別のモデルに切り替えることができます。

- **キーボードショートカット**: 一部のターミナルでは `/model` に対するショートカットを設定できます（例: Ctrl+M）。

## 関連情報

- [Model selection - Claude Code Docs](https://code.claude.com/docs/en/models)
- [Anthropic Models Overview](https://www.anthropic.com/models)
- [Pricing by Model](https://www.anthropic.com/pricing)
- [Commands reference](https://code.claude.com/docs/en/commands)
- [Model comparison guide](https://claudefa.st/blog/guide/model-comparison)
