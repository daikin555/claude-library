---
title: "Windows: ドライブレターの大小文字差異によるCLAUDE.mdの二重読み込み問題を修正"
date: 2026-02-19
tags: [bug-fix, windows, claude-md]
---

## 原文（日本語に翻訳）

Windows: パス間でドライブレターの大小文字が異なる場合に同じCLAUDE.mdファイルが2回読み込まれていた問題を修正 (anthropics/claude-code#25756)

## 原文（英語）
Windows: Fixed the same CLAUDE.md file being loaded twice when drive letter casing differs between paths (anthropics/claude-code#25756)

## 概要

Windowsでは、同じドライブを参照するパスでも `C:\` と `c:\` のようにドライブレターの大文字・小文字が異なる場合がありました。この差異により、Claude CodeがCLAUDE.mdファイルを同一ファイルとして認識できず、2回読み込んでしまう問題が修正されました。この修正により、設定が重複して適用される問題が解消されます。

## 基本的な使い方

```bash
# 修正前: 以下のような状況でCLAUDE.mdが二重読み込みされていた
# パス1: C:\Users\username\project\CLAUDE.md
# パス2: c:\Users\username\project\CLAUDE.md (同じファイルだが大文字小文字が異なる)

# 修正後: ドライブレターの大小文字に関係なく、同一ファイルとして正しく認識される
claude  # CLAUDE.mdは1回だけ読み込まれる
```

## 実践例

### グローバルとプロジェクトのCLAUDE.md設定

```markdown
# C:\Users\username\.claude\CLAUDE.md (グローバル設定)
# プロジェクト固有の設定は別ファイルで管理

# c:\Users\username\project\CLAUDE.md (プロジェクト設定)
# この修正により、ドライブレターの大小文字が混在していても
# 重複読み込みが発生しなくなった
```

### Windows環境でのパス確認

```powershell
# Windowsでのパス確認
# 修正前は以下のような場合に問題が発生していた
$env:CLAUDE_PROJECT_ROOT = "C:\project"  # 大文字C
# vs
cd c:\project  # 小文字c でcdした場合

# 修正後はどちらの表記でも同一パスとして扱われる
claude
```

### 環境変数とパスの混在シナリオ

```batch
:: Windows batファイルでのシナリオ
:: 環境変数が大文字ドライブレターを持ち、カレントディレクトリが小文字の場合でも
:: CLAUDE.mdは重複して読み込まれなくなった
SET PROJECT_PATH=C:\Users\dev\myproject
cd c:\Users\dev\myproject
claude
```

## 注意点

- この修正はWindows環境特有の問題への対処です
- macOSやLinuxではドライブレターの概念がないため、この問題は発生しません
- Windowsのファイルシステムは大文字小文字を区別しない（case-insensitive）ため、`C:\` と `c:\` は同一パスですが、文字列比較では異なると判断されていました
- v2.1.47以降にアップデートすることで自動的に修正が適用されます

## 関連情報

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Issue #25756](https://github.com/anthropics/claude-code/issues/25756)
