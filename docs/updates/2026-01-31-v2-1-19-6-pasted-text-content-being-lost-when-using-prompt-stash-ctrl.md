---
title: "プロンプト一時保存（Ctrl+S）でペーストしたテキストが消失する問題の修正"
date: 2026-01-23
tags: ['バグ修正', 'プロンプト', 'ショートカット']
---

## 原文（日本語に翻訳）

プロンプト一時保存（Ctrl+S）と復元を使用した際に、ペーストしたテキストコンテンツが消失する問題を修正しました。

## 原文（英語）

Fixed pasted text content being lost when using prompt stash (Ctrl+S) and restore

## 概要

Claude Code v2.1.19で修正されたバグです。プロンプト一時保存機能（Ctrl+S）を使用した際に、クリップボードからペーストしたテキストが保存・復元の過程で失われてしまう問題が解決されました。これにより、長いコードやログ、設定ファイルなどをペーストして一時保存した場合でも、内容が確実に保持されるようになりました。

## 基本的な使い方

プロンプト一時保存機能は、入力中のプロンプトを一時的に保存しておく機能です。

**基本操作:**

1. プロンプト入力欄にテキストを入力（手入力またはペースト）
2. `Ctrl+S` (macOS: `Cmd+S`) で一時保存
3. 他のタスクを実行
4. `Ctrl+S` で保存したプロンプトを復元

**修正された問題の例:**

```bash
# 修正前: ペーストしたログが消失していた
# 1. エラーログをコピー
# 2. Claude Codeにペースト
# 3. Ctrl+S で一時保存
# 4. 復元すると → ペースト部分が空になっていた

# 修正後: すべてのテキストが保持される
# 1. エラーログをコピー
# 2. Claude Codeにペースト
# 3. Ctrl+S で一時保存
# 4. 復元すると → ペースト部分も含めて完全に復元される
```

## 実践例

### エラーログの調査

長いスタックトレースやエラーログをペーストして、一時的に他の作業を行う場合:

```
手順:
1. ターミナルからエラーログをコピー
2. Claude Codeのプロンプト欄にペースト
3. 「このエラーを分析して」と入力
4. Ctrl+S で一時保存
5. 別のタスク（コードレビューなど）を実行
6. Ctrl+S でエラー調査のプロンプトを復元
7. そのまま送信してエラー分析を開始

修正前: ステップ6でエラーログ部分が消失
修正後: エラーログも含めて完全に復元される
```

### 大きな設定ファイルのレビュー

設定ファイルの内容をペーストしてレビューを依頼する場合:

```yaml
# package.jsonの内容をコピー
{
  "name": "my-app",
  "version": "1.0.0",
  "dependencies": {
    "react": "^18.2.0",
    ...
  }
}

プロンプト: この設定を確認して、セキュリティ上の問題がないかチェックしてください。
```

一時保存して後で復元しても、ペーストした設定ファイルの内容が保持されます。

### 複数のコードスニペットを含むレビュー依頼

```
以下のコードをレビューしてください:

[関数1をペースト]
[関数2をペースト]
[関数3をペースト]

特にパフォーマンスとセキュリティに注目してください。
```

このような複数のコードスニペットを含むプロンプトでも、一時保存・復元で内容が維持されます。

### ドキュメントの翻訳依頼

英語のドキュメントをペーストして翻訳を依頼する場合:

```
以下の英語ドキュメントを日本語に翻訳してください:

[長い英語ドキュメントをペースト]

技術用語は適切に翻訳し、コードブロックはそのまま保持してください。
```

一時保存機能により、他の緊急タスクを挟んでも翻訳依頼が失われません。

## 注意点

- **この修正はv2.1.19で実装されました**: それ以前のバージョンではペーストしたテキストが失われる可能性があります
- **手入力のテキストは影響なし**: この問題はペーストしたテキストのみに発生していました
- **複数回の保存**: Ctrl+Sは1つのプロンプトのみを保存するため、複数のプロンプトを管理する場合は別の方法（セッションのフォークなど）を検討してください
- **大きなテキストの扱い**: 非常に大きなテキスト（数MB以上）をペーストする場合は、ファイルとして添付する方が適切な場合があります

## 関連情報

- [Claude Code 公式ドキュメント](https://code.claude.com/docs/)
- [Changelog v2.1.19](https://github.com/anthropics/claude-code/releases/tag/v2.1.19)
- [セッション管理機能](https://code.claude.com/docs/en/sessions)
