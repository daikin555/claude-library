---
title: "ツール実行中に中断されたセッション再開時のAPIエラーを修正"
date: 2026-01-28
tags: [bugfix, api, session, resume, tool-execution]
---

## 原文（日本語訳）
ツール実行中に中断されたセッションを再開する際のAPIエラーを修正しました

## 原文（英語）
Fixed API errors when resuming sessions that were interrupted during tool execution

## 概要
ツールの実行中にセッションが予期せず終了した場合でも、`--resume` で正常に再開できるようになりました。以前は、ツール実行の途中で中断されたセッションを再開するとAPIエラーが発生していました。

## 実践例

### 予期しない終了からの復旧

```bash
# ツール実行中に接続が切れた場合
claude
> 大きなプロジェクトの全ファイルを分析してください

# ... 実行中にネットワークエラーや端末を閉じた場合 ...

# 再起動後、同じディレクトリで再開
claude --resume
# → エラーなく前回の作業が再開される
```

### 長時間実行タスクの中断と再開

```bash
# 長時間のビルドプロセス実行中
claude
> プロジェクト全体をビルドしてテストしてください

# Ctrl+C で中断、または予期せず終了

# 後で再開
claude --continue
# → 以前は API エラーが発生していたが、正常に再開される
```

## 注意点

- **自動復旧**: セッション状態が自動的に修復され、中断されたツールの状態も適切に処理されます
- **データ整合性**: ツール実行の結果が部分的に保存されている場合も、正しく処理されます
- **再実行の可否**: 中断されたツールが再実行可能な場合、Claude は必要に応じて再実行を試みます

## 関連情報

- [Claude Code Changelog - v2.1.21](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Session Resume Documentation](https://code.claude.com/docs/en/sessions)
