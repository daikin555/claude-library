---
title: ".claude/agents/ディレクトリ内の非エージェントMarkdownファイルの誤警告を修正"
date: 2026-02-16
tags: [bug-fix, agents, warnings]
---

## 原文（日本語）
`.claude/agents/` ディレクトリ内の非エージェントMarkdownファイルに対する誤った警告を修正しました。

## 原文（英語）
Fixed spurious warnings for non-agent markdown files in `.claude/agents/` directory

## 概要
Claude Code 2.1.43では、`.claude/agents/` ディレクトリに配置されたエージェント定義ファイル以外のMarkdownファイル（READMEやドキュメントなど）に対して誤って警告が表示される問題が修正されました。これにより、ドキュメントファイルを自由に配置できるようになり、警告メッセージが適切なケースのみに表示されるようになります。

## 基本的な使い方
`.claude/agents/` ディレクトリにドキュメントファイルを配置しても、警告が表示されなくなります。

```bash
# ディレクトリ構成例
~/.claude/agents/
├── README.md              # ドキュメント（警告なし）
├── AGENTS.md              # ドキュメント（警告なし）
├── my-agent.md            # エージェント定義ファイル
└── docs/
    └── guide.md           # ドキュメント（警告なし）
```

## 実践例

### 修正前の動作（2.1.42以前）
以前のバージョンでは、エージェント定義以外のMarkdownファイルがあると警告が表示されていました:

```bash
# README.mdを配置した場合
Warning: Agent file /Users/username/.claude/agents/README.md is missing required 'name' in frontmatter

# ドキュメントファイルを配置した場合
Warning: Agent file /Users/username/.claude/agents/docs/setup-guide.md is missing required 'name' in frontmatter
```

### 修正後の動作（2.1.43以降）
現在は、エージェント定義以外のMarkdownファイルに対して警告が表示されなくなりました:

```bash
# README.mdやドキュメントを自由に配置可能
~/.claude/agents/
├── README.md              # ✓ 警告なし
├── CONTRIBUTING.md        # ✓ 警告なし
└── my-custom-agent.md     # ✓ 正常なエージェント定義
```

### エージェント定義ファイルの正しい形式
適切なエージェント定義ファイルは、以下のようにYAMLフロントマターを含む必要があります:

```markdown
---
name: "my-custom-agent"
description: "カスタムエージェントの説明"
---

# エージェントのシステムプロンプト

このエージェントは...
```

### ドキュメントファイルの配置例
エージェントディレクトリにドキュメントを配置する場合:

```markdown
# README.md（フロントマター不要）

## カスタムエージェント一覧

このディレクトリには以下のカスタムエージェントが含まれています:

- **my-custom-agent.md**: 特定タスク用エージェント
- **analyzer.md**: コード分析エージェント
```

### 複数のドキュメントファイルの整理
プロジェクトドキュメントを階層化して整理できます:

```bash
~/.claude/agents/
├── README.md                    # 概要
├── agents/
│   ├── code-reviewer.md         # エージェント
│   └── test-generator.md        # エージェント
└── docs/
    ├── setup.md                 # セットアップガイド
    ├── best-practices.md        # ベストプラクティス
    └── troubleshooting.md       # トラブルシューティング
```

## 注意点
- **エージェント定義には依然としてフロントマターが必須**: 実際のエージェント定義ファイルには、`name` と `description` を含むYAMLフロントマターが必要です
- **ファイル配置のベストプラクティス**: ドキュメントファイルは `docs/` サブディレクトリに配置すると、エージェント定義ファイルとの区別が明確になります
- **警告が表示される正当なケース**: 適切なフロントマターを持たないエージェント定義ファイルには、依然として警告が表示されます

## 関連情報
- [Create Custom Subagents - Claude Code公式ドキュメント](https://code.claude.com/docs/en/sub-agents)
- [Agent Discovery Failure - GitHub Issue #5763](https://github.com/anthropics/claude-code/issues/5763)
- [How to Use Claude Code: Agents and Skills](https://www.producttalk.org/how-to-use-claude-code-features/)
- [Support AGENTS.md Feature Request - GitHub Issue #6235](https://github.com/anthropics/claude-code/issues/6235)
- [Custom Agents with Claude Code](https://www.ascend.io/blog/custom-agents-with-claude-code-and-otto)
