---
title: "CLAUDE_CODE_DISABLE_1M_CONTEXT環境変数で1Mコンテキストウィンドウのサポートを無効化できるようになりました"
date: 2026-02-21
tags: [new-feature, configuration, context-window, environment-variable]
---

## 原文（日本語に翻訳）

1Mコンテキストウィンドウのサポートを無効化するための `CLAUDE_CODE_DISABLE_1M_CONTEXT` 環境変数が追加されました。

## 原文（英語）

Added `CLAUDE_CODE_DISABLE_1M_CONTEXT` environment variable to disable 1M context window support

## 概要

`CLAUDE_CODE_DISABLE_1M_CONTEXT` 環境変数を設定することで、Claude CodeのOpus 4.6（ファストモード）で利用可能になった100万トークン（1M）コンテキストウィンドウを意図的に無効化できるようになりました。コスト管理、ネットワーク帯域の節約、レイテンシの低減など、1Mコンテキストを必要としない用途での利用に適しています。

## 基本的な使い方

```bash
# 1Mコンテキストウィンドウを無効化して起動
CLAUDE_CODE_DISABLE_1M_CONTEXT=1 claude

# または環境変数として永続化
export CLAUDE_CODE_DISABLE_1M_CONTEXT=1
claude

# ヘッドレスモードでも使用可能
CLAUDE_CODE_DISABLE_1M_CONTEXT=1 claude -p "コードをレビューして"
```

## 実践例

### ユースケース1: APIコストの管理

大きなコンテキストウィンドウを使用するとAPIコストが増加する場合があります。小規模なタスクでは1Mコンテキストを無効化することでコストを抑えられます。

```bash
# 小さなファイルの修正など、大きなコンテキストが不要な作業
CLAUDE_CODE_DISABLE_1M_CONTEXT=1 claude -p "このエラーメッセージの原因を教えて: $error_msg"

# 通常のコンテキストで十分な作業
CLAUDE_CODE_DISABLE_1M_CONTEXT=1 claude -p "README.mdを更新して"
```

### ユースケース2: CI/CDでの安定したコスト制御

CI/CDパイプラインでClaudeを使用する際にコストの上限を制御する場合。

```yaml
# .github/workflows/review.yml
name: Code Review

env:
  # 不要な大きなコンテキストを避けてコストを管理
  CLAUDE_CODE_DISABLE_1M_CONTEXT: "1"

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Review PR
        run: |
          claude -p "このPRの変更をレビューして問題点を報告して"
```

### ユースケース3: レイテンシの最適化

リアルタイム性が重要な場合に1Mコンテキストを無効化してレスポンスを改善する場合。

```bash
#!/bin/bash
# quick-check.sh - 素早い応答が必要なチェック

export CLAUDE_CODE_DISABLE_1M_CONTEXT=1

# シンプルなチェックを高速で実行
claude -p "このコードに明らかなバグがあるか確認して: $(cat $1)"
```

### ユースケース4: 特定の環境での制御

特定の環境（例: 低スペックサーバー）で大きなコンテキストを避ける場合。

```bash
# .bashrc または .zshrc での環境別設定

if [ "$ENVIRONMENT" = "production-ci" ]; then
  # CI環境では1Mコンテキストを無効化
  export CLAUDE_CODE_DISABLE_1M_CONTEXT=1
fi
```

## 注意点

- `CLAUDE_CODE_DISABLE_1M_CONTEXT=1` を設定すると、1Mトークンのコンテキストウィンドウが利用できなくなります。大規模なコードベースの分析など、大きなコンテキストが必要なタスクには適していません。
- この環境変数はOpus 4.6（ファストモード）の1Mコンテキストに影響します。他のモデルには影響しない場合があります。
- 1Mコンテキストを必要とする場合は、この環境変数を設定しないでください（デフォルトは有効）。
- APIコストと1Mコンテキストの関係はAnthropicの料金体系を確認してください。

## 関連情報

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Opus 4.6ファストモードの1Mコンテキスト](./2.1.50-opus-46-fast-1m-context.md)
- [Anthropic 料金情報](https://www.anthropic.com/pricing)
