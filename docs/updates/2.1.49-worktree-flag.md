---
title: "--worktreeフラグで孤立したgit worktree上でClaudeを起動する"
date: 2026-02-20
tags: [new-feature, worktree, git, isolation]
---

## 原文（日本語に翻訳）

`--worktree`（`-w`）フラグを追加しました。孤立したgit worktreeでClaudeを起動できます。

## 原文（英語）

Added `--worktree` (`-w`) flag to start Claude in an isolated git worktree

## 概要

`--worktree`（または短縮形の `-w`）フラグを使うことで、Claude Codeを起動する際に独立したgit worktreeを自動的に作成し、その中でセッションを開始できます。これにより、メインのワーキングディレクトリを汚さずに実験的な作業や並行開発が可能になります。

## 基本的な使い方

```bash
# 孤立したgit worktreeでClaudeを起動
claude --worktree

# 短縮形
claude -w
```

起動すると、一時的なgit worktreeが作成され、その中でClaude Codeセッションが開始されます。

## 実践例

### ユースケース1: 実験的な変更を安全に試す

メインブランチを汚さずに、実験的な変更をClaudeに依頼する場合。

```bash
# メインリポジトリのルートで実行
cd ~/projects/my-app

# worktreeで隔離されたセッションを起動
claude --worktree

# Claude内でリファクタリングを依頼
> このモジュールをTypeScriptに移行してください
# → worktree内でのみ変更が行われる
# → メインのワーキングディレクトリは変更されない
```

### ユースケース2: 並行して複数のタスクを処理

複数の独立したタスクを同時に進める場合。

```bash
# ターミナル1: フィーチャーAの作業
claude --worktree
# → worktree-a で作業

# ターミナル2: フィーチャーBの作業（別のworktreeで）
claude --worktree
# → worktree-b で作業

# 両方のセッションが独立して動作
```

### ユースケース3: コードレビュー前の検証

プルリクエストのレビュー前に変更を安全に検証する場合。

```bash
# レビュー対象のブランチを確認する前に
claude --worktree

# Claude内で変更内容を確認
> このPRの変更点を分析して、潜在的な問題を指摘してください
# → worktreeで安全に作業できる
```

## 注意点

- `--worktree`フラグはgitリポジトリ内で実行する必要があります。
- 一時的なworktreeはセッション終了後に自動でクリーンアップされます（実装によって異なる場合があります）。
- worktreeは元のリポジトリと同じgitオブジェクトを共有するため、ストレージ効率が高いです。
- サブエージェントで自動的にworktreeを使用する場合は `isolation: "worktree"` 設定も参照してください。

## 関連情報

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Git Worktree ドキュメント](https://git-scm.com/docs/git-worktree)
- [サブエージェントのworktree分離](./2.1.49-subagent-worktree-isolation.md)
