---
title: "狭いターミナルでの折りたたみヒントテキスト溢れを修正"
date: 2026-02-19
tags: [bug-fix, ui, terminal]
---

## 原文（日本語に翻訳）

狭いターミナルで折りたたまれた読み取り/検索のヒントテキストが溢れる問題を、先頭から切り詰めることで修正しました。

## 原文（英語）
Fixed collapsed read/search hint text overflowing on narrow terminals by truncating from the start.

## 概要

ターミナルの幅が狭い環境で、折りたたまれたファイル読み取りや検索結果のヒントテキストが画面外にはみ出すUIの問題が修正されました。修正後はテキストを先頭から切り詰めることで、ターミナルの幅に収まるよう自動調整されます。特に小さいウィンドウや縦分割したターミナルを使用している環境で表示が改善されます。

## 基本的な使い方

狭いターミナルでClaude Codeを使用した場合の表示改善です。特別な操作は不要で、自動的に適用されます。

```bash
# 幅の狭いターミナルで Claude Code を起動
claude

# ファイルを読み込む操作を行うと
# 修正前: ヒントテキストがターミナル幅を超えて溢れる
# Read /very/long/path/to/some/file.ts (200 lines) ─── [長すぎて画面外]

# 修正後: 先頭から切り詰めて収める
# ...ng/path/to/some/file.ts (200 lines) ─── [ターミナル幅内に収まる]
```

## 実践例

### ユースケース1: 縦分割ターミナルでの使用

tmuxやiTermなどで縦分割したペインでClaude Codeを使用する場合。

```bash
# tmux で縦分割（例: 幅40文字のペイン）
tmux split-window -h

# 狭いペインでClaude Codeを起動
claude

# ファイル操作を行うと表示が適切に折り返される
# 修正前: テキストが溢れてUIが崩れる
# 修正後: ...ile.ts (200 lines) のように先頭省略で表示
```

### ユースケース2: モバイルターミナルアプリでの使用

スマートフォンやタブレットのターミナルアプリで使用する場合。

```bash
# 画面幅が限られた環境でも正常に表示される
# iSH や Terminus などのモバイルターミナルでも
# ヒントテキストが画面内に収まるよう調整される

# 例: 幅50文字の画面での表示
# 修正前: Read /home/user/project/src/components/Header.tsx (150 lines)
#          ↑ 画面をはみ出してUIが壊れる

# 修正後: ...ents/Header.tsx (150 lines)
#          ↑ 先頭が省略されて画面内に収まる
```

### ユースケース3: リモートSSH接続での小窓使用

SSHでリモートサーバーに接続し、小さいターミナルウィンドウで作業する場合。

```bash
# リモートサーバーへSSH接続
ssh user@remote-server

# Claude Codeを起動（狭いウィンドウでも正常動作）
claude

# 検索結果のヒントも適切に表示される
# 例: Glob **/*.ts (25 files) のようなヒントが
# ウィンドウ幅に合わせて切り詰められる
```

## 注意点

- テキストは「先頭から」切り詰められます。これにより、ファイル名やパスの末尾（最も重要な情報）が表示されます
- 切り詰めが発生した場合、先頭に `...` が表示されて省略を示します
- ターミナルの幅を広げると完全なテキストが表示されます
- この修正はヒントテキストのみに適用され、実際のファイル内容の表示には影響しません

## 関連情報

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [CHANGELOG.md](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Claude Code ターミナル設定](https://docs.anthropic.com/ja/docs/claude-code/terminal-setup)
