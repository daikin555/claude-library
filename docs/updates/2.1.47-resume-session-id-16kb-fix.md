---
title: "/resume <session-id>で最初のメッセージが16KBを超えるセッションが見つからない問題の修正"
date: 2026-02-19
tags: [bug-fix, session, resume, large-message]
---

## 原文（日本語に翻訳）

最初のメッセージが16KBを超えるセッションを `/resume <session-id>` で見つけられない問題を修正しました（anthropics/claude-code#25920）

## 原文（英語）
Fixed `/resume <session-id>` failing to find sessions whose first message exceeds 16KB (anthropics/claude-code#25920)

## 概要

Claude Codeでは `/resume <session-id>` コマンドを使用して以前のセッションを再開できますが、セッションの最初のメッセージが16KBを超えていた場合、セッションが見つからないというエラーが発生していました。大きなコードスニペットやファイル内容を貼り付けて開始したセッションで特に問題となっていましたが、この修正により大きな初期メッセージを持つセッションも正しく再開できるようになります。

## 基本的な使い方

大きな初期メッセージを含むセッションを再開する場合。

```bash
# セッションIDを指定してセッションを再開
claude --resume abc123def456

# または/resumeコマンドで
claude
> /resume abc123def456

# 修正後: 最初のメッセージが16KB超でも正常に再開できる
```

## 実践例

### ユースケース1: 大きなコードファイルを最初に貼り付けたセッションの再開

長いコードファイルの内容をプロンプトに貼り付けて開始したセッション。

```bash
# セッション開始時に大きなファイルを貼り付けた場合
claude
> 以下のコード全体をリファクタリングしてください：
> [10,000行以上のコード... → 16KB超]

# このセッションのIDを記録
# セッションID: session_2026021901

# 後でセッションを再開しようとした場合
claude --resume session_2026021901
# 修正後: 正常に再開できる
# 修正前: "セッションが見つかりません" エラーが発生していた
```

### ユースケース2: 大量のデータ分析セッションの継続

大きなCSVデータや設定ファイルを含む分析セッションの再開。

```bash
# データ分析セッションの開始
claude
> 以下のデータを分析してください：
> [大きなJSONデータ、CSVデータなど... → 16KB超]
> 最初に全体的な統計を出してください

# セッションIDを確認
> /session-info
# → セッションID: analytics_session_abc

# 翌日、同じセッションで作業を継続
claude --resume analytics_session_abc
# 修正後: 大きな初期データを持つセッションも正常に再開
```

### ユースケース3: セッションIDの確認方法

再開したいセッションのIDを確認する方法。

```bash
# 方法1: セッション一覧から確認
claude --resume
# インタラクティブピッカーでセッションを選択

# 方法2: セッション情報を確認
claude
> /session-info
# 現在のセッションIDが表示される

# 方法3: セッション履歴ファイルから確認
ls ~/.claude/sessions/
# セッションIDがファイル名になっているので確認できる

# IDを使って直接再開
claude --resume <確認したセッションID>
```

## 注意点

- セッションの最初のメッセージが16KBを超える場合は、この修正の恩恵を受けます（以前のバージョンで開始したセッションも含む）。
- セッションが保存される場所はデフォルトで `~/.claude/sessions/` ディレクトリです。
- 16KBの制限はセッション検索時の問題であり、実際のメッセージ処理では異なる制限が適用されます。
- セッションが長期間経過している場合、コンテキストの関連性が低下することがあります。
- セッションIDはUUID形式で生成されます。

## 関連情報

- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [GitHub Issue #25920](https://github.com/anthropics/claude-code/issues/25920)
- [セッション管理について](https://docs.anthropic.com/ja/docs/claude-code/overview)
