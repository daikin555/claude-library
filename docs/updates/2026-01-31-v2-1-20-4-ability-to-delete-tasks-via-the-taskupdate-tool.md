---
title: "TaskUpdateツールでタスクの削除が可能に"
date: 2026-01-27
tags: ['新機能', 'タスク管理', 'ツール']
---

## 原文（日本語に翻訳）

`TaskUpdate`ツールを使用したタスク削除機能を追加

## 原文（英語）

Added ability to delete tasks via the `TaskUpdate` tool

## 概要

Claude Code v2.1.20で、`TaskUpdate`ツールを使用してタスクを削除できるようになりました。複雑な作業中に作成されたタスクリストから、完了済みや不要になったタスクを削除することで、タスクリストを整理し、現在の作業に集中できます。これは、長期的なプロジェクトや複数のステップを含む作業で特に有用です。

## 基本的な使い方

Claude Codeのタスクリストから不要なタスクを削除するには、Claudeに直接依頼します：

```bash
# タスクリストの表示
/todos

# 特定のタスクを削除するよう依頼
"タスクリストから完了済みのタスクを削除してください"

"タスク番号3と5を削除してください"

"不要になったすべてのタスクをクリアしてください"
```

## タスクリストの操作

タスクリストを効率的に管理するための操作：

```bash
# すべてのタスクを表示
/todos

# タスクリストの切り替え表示（最大10件表示）
Ctrl+T

# タスクの追加・更新・削除はClaudeに依頼
"新しいタスクを追加: APIエンドポイントのテスト"
"タスク2を完了としてマークしてください"
"古いタスクを削除してください"
```

## 実践例

### プロジェクトフェーズの切り替え

開発フェーズが変わった際に、前フェーズのタスクを削除：

```
ユーザー: "設計フェーズは完了したので、設計関連のタスクをすべて削除して、
          実装フェーズのタスクを追加してください"

Claude: タスクリストを更新しました。
        削除:
        - 要件定義の確認
        - アーキテクチャ設計
        - データベース設計

        追加:
        - APIエンドポイントの実装
        - フロントエンド画面の実装
        - ユニットテストの作成
```

### 完了済みタスクの整理

長期プロジェクトで完了済みタスクが蓄積した場合：

```
ユーザー: "完了済みのタスクをすべて削除してください"

Claude: 15個の完了済みタスクを削除しました。
        残りの進行中タスク:
        - [ ] デプロイメント設定
        - [ ] ドキュメント作成
        - [ ] パフォーマンステスト
```

### タスク再計画

作業方針が変更になり、タスクを再構築：

```
ユーザー: "現在のタスクリストをすべてクリアして、
          新しいアプローチでタスクを作り直してください"

Claude: タスクリストをクリアしました。
        新しいアプローチに基づいて以下のタスクを作成しました:
        - [ ] 既存APIの調査
        - [ ] 移行計画の作成
        - [ ] 段階的な移行実施
```

### 重複タスクの削除

類似または重複したタスクを整理：

```
ユーザー: "重複しているタスクを削除してください"

Claude: 以下の重複タスクを削除しました:
        - "テストの実行" (タスク5)  ← "ユニットテストの実行"と重複
        - "ビルドチェック" (タスク8) ← "ビルドとテスト"と重複
```

### 特定カテゴリのタスク削除

条件に合うタスクを一括削除：

```
ユーザー: "ドキュメント関連のタスクを削除してください"

Claude: ドキュメント関連の3つのタスクを削除しました:
        - READMEの更新
        - API仕様書の作成
        - 使い方ガイドの執筆
```

## タスクリストの永続化

タスクは以下の場所に保存され、セッション間で永続化されます：

```bash
# タスクリストの保存場所
~/.claude/tasks/

# プロジェクトごとにタスクリストを分離
CLAUDE_CODE_TASK_LIST_ID=my-project claude

# この設定で、タスクは以下に保存される
~/.claude/tasks/my-project/
```

## 注意点

- タスクの削除は`TaskUpdate`ツールを通じてClaudeが実行します
- ユーザーが直接ツールを呼び出す必要はなく、Claudeに依頼するだけです
- 削除されたタスクは復元できないため、重要なタスクを削除する前に確認してください
- タスクリストはコンテキスト圧縮後も保持されます
- 従来のTODOリストに戻すには`CLAUDE_CODE_ENABLE_TASKS=false`を設定

## タスクリスト vs TODOリスト

Claude Code v2.1.20では新しいタスクリストシステムが導入されました：

| 機能                 | タスクリスト（新） | TODOリスト（旧） |
| -------------------- | ------------------ | ---------------- |
| 削除機能             | ✅ 可能             | ❌ 不可           |
| 永続化               | ✅ あり             | ❌ なし           |
| コンテキスト圧縮対応 | ✅ 保持される       | ❌ 失われる       |
| 表示切り替え         | ✅ Ctrl+T          | ❌ なし           |
| プロジェクト別管理   | ✅ 可能             | ❌ 不可           |

## 関連コマンド

```bash
# タスクリスト表示
/todos

# バックグラウンドタスクの管理（別機能）
/tasks

# タスクリスト表示の切り替え
Ctrl+T
```

## 関連情報

- [Interactive Mode - Task list](https://code.claude.com/docs/en/interactive-mode#task-list)
- [Interactive Mode - Background bash commands](https://code.claude.com/docs/en/interactive-mode#background-bash-commands)
- [Settings - Environment variables](https://code.claude.com/docs/en/settings#environment-variables)
- [Changelog v2.1.20](https://github.com/anthropics/claude-code/releases/tag/v2.1.20)
