---
title: "設定バックアップファイルをホームディレクトリルートから~/.claude/backups/に移動"
date: 2026-02-19
tags: [improvement, config, backup, file-organization]
---

## 原文（日本語に翻訳）

ホームディレクトリの散乱を減らすために、設定バックアップファイルをホームディレクトリルートから `~/.claude/backups/` に移動 (anthropics/claude-code#26130)

## 原文（英語）
Moved config backup files from home directory root to `~/.claude/backups/` to reduce home directory clutter (anthropics/claude-code#26130)

## 概要

これまでClaude Codeの設定バックアップファイルはホームディレクトリ（`~/`）の直下に作成されていましたが、v2.1.47から `~/.claude/backups/` ディレクトリに移動されました。これにより、ホームディレクトリが設定バックアップファイルで散乱することを防ぎ、ファイル管理がより整理されます。

## 基本的な使い方

```bash
# 修正前: バックアップファイルがホームディレクトリに作成されていた
# ~/settings.json.backup
# ~/settings.json.bak
# など

# 修正後: バックアップファイルは ~/.claude/backups/ に保存される
ls ~/.claude/backups/
# settings.json.backup
# settings.json.2026-02-19.bak
# など
```

## 実践例

### バックアップファイルの確認

```bash
# 新しいバックアップ保存場所を確認する
ls -la ~/.claude/backups/

# バックアップファイルの内容を確認
cat ~/.claude/backups/settings.json.backup
```

### 既存のバックアップファイルの移行

```bash
# v2.1.47以前にホームディレクトリに作成されたバックアップファイルがある場合
# 手動で移行する必要がある場合は以下のコマンドを使用

# バックアップディレクトリの作成（存在しない場合）
mkdir -p ~/.claude/backups/

# ホームディレクトリの古いバックアップファイルを移動
mv ~/settings.json.backup ~/.claude/backups/ 2>/dev/null || true
mv ~/.claude.json.backup ~/.claude/backups/ 2>/dev/null || true
```

### ホームディレクトリのクリーンアップ

```bash
# 古いバージョンで作成されたバックアップファイルを確認
ls ~/*.backup 2>/dev/null
ls ~/*.bak 2>/dev/null

# 不要になった古いバックアップをアーカイブ
mkdir -p ~/.claude/backups/legacy
mv ~/claude_*.backup ~/.claude/backups/legacy/ 2>/dev/null || true
```

## 注意点

- この変更はv2.1.47以降に自動的に適用されます
- 既存のバックアップファイルはホームディレクトリに残る場合があります（自動移行は行われません）
- `~/.claude/backups/` ディレクトリはClaude Codeが自動的に作成します
- この変更はホームディレクトリを整理するための改善であり、機能への影響はありません
- 古いバックアップが必要な場合は、手動でホームディレクトリを確認してください

## 関連情報

- [Claude Code 設定ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/settings)
- [Claude Code 公式ドキュメント](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Issue #26130](https://github.com/anthropics/claude-code/issues/26130)
