---
title: "MCPサーバー再接続時のツール/リソースキャッシュリーク修正"
date: 2026-02-28
tags: [bug-fix, mcp, memory, cache, stability]
---

# MCPサーバー再接続時のツール/リソースキャッシュリーク修正

## 原文（日本語に翻訳）

MCPサーバーの再接続時のMCPツール/リソースキャッシュのリークを修正しました。

## 原文（英語）

Fixed MCP tool/resource cache leak on server reconnect

## 概要

Claude Code v2.1.63で、MCPサーバーが再接続する際にツールとリソースのキャッシュが正しくクリアされない問題が修正されました。頻繁に再接続するMCPサーバーを使用している場合、キャッシュが際限なく積み重なりメモリ使用量が増加していました。

## 基本的な使い方

この修正はバックグラウンドで自動的に適用されます。ユーザー側での操作は不要です。

## 実践例

### 影響を受けるシナリオ

- 不安定なMCPサーバー接続（ネットワーク不安定、サーバー再起動など）
- 頻繁に再接続するMCPサーバーを使用する長時間セッション

### 修正後の改善

```
# MCPサーバー接続状態の例
接続 → ツール/リソースキャッシュ作成
切断 → 修正前：キャッシュ残留
再接続 → 修正前：追加キャッシュ（蓄積）

修正後：
切断 → キャッシュクリア
再接続 → 新しいキャッシュ作成（適切なサイズを維持）
```

## 注意点

- v2.1.63にアップデートすることで自動的に修正が適用されます
- 多数のMCPサーバーを使用する環境や、再接続が頻繁に発生する環境で特に効果があります

## 関連情報

- [Claude Code MCP設定](https://docs.anthropic.com/ja/docs/claude-code/mcp)
