---
title: "スラッシュコマンド入力時のゴーストテキストちらつき修正"
date: 2026-01-27
tags: [bugfix, ui, slash-command, ghost-text]
---

## 原文（日本語訳）
入力途中でスラッシュコマンドを入力する際のゴーストテキストのちらつきが修正されました

## 原文（英語）
Fixed ghost text flickering when typing slash commands mid-input

## 概要
プロンプトの途中でスラッシュコマンドを入力する際、オートコンプリートのゴーストテキスト（薄く表示される補完候補）がちらついて見づらかった問題が修正されました。より快適にスラッシュコマンドを使用できます。

## 問題の背景

### 修正前の問題
- 入力途中で `/` を入力すると、ゴーストテキストが点滅・ちらついた
- 視覚的に不快で、オートコンプリート候補が読みにくかった
- 特に高速タイピング時に顕著だった

### 修正後
- ゴーストテキストが安定して表示される
- スムーズなタイピング体験
- オートコンプリート候補が読みやすい

## 基本的な使い方

特別な操作は不要です。通常通りスラッシュコマンドを入力するだけで、改善された表示を体験できます。

```bash
claude
> ファイルを確認して、次に/
# ゴーストテキスト: /compact, /context, /config...
# ✅ ちらつきなく安定表示
```

## 実践例

### 入力途中でのコマンド使用

```bash
claude
> プロジェクトのコードを確認してから/com
# ゴーストテキスト: pact
# → /compact が補完候補として安定表示

> プロジェクトのコードを確認してから/compact
# ✅ スムーズに補完完了
```

### 複数のコマンド候補表示

```bash
claude
> データベースをチェックして/c
# 候補:
# /compact   - 会話を圧縮
# /context   - コンテキスト表示
# /config    - 設定を開く
# /clear     - 会話をクリア
# ✅ すべての候補が安定表示
```

### 高速タイピング時

```bash
claude
> タスクを実行して/tasks次に/config最後に/compact
#                  ^^^^^ ^^^^^ ^^^^^^
# すべてのゴーストテキストが安定表示
# ✅ ちらつきなし
```

### 文章中でのコマンド

```bash
claude
> まず/context でコンテキストを確認してから/compact で圧縮
#     ^^^^^^^^                              ^^^^^^^^
# 両方のゴーストテキストが正しく表示される
```

### Tab 補完との組み合わせ

```bash
claude
> /con
# ゴーストテキスト: text
# ✅ 安定表示

[Tab を押す]
> /context
# ✅ スムーズに補完完了
```

## ゴーストテキストの仕組み

### ゴーストテキストとは

```bash
> /com
#     pact ← このグレーアウトされたテキストがゴーストテキスト
```

薄い色で表示される補完候補で、Tab や → キーで確定できます。

### 表示タイミング

```bash
# スラッシュコマンドの開始を検出
> /
# → ゴーストテキスト表示開始

# 文字を入力するごとに更新
> /c
# → /compact, /context, /config などが候補に

> /co
# → /compact, /context, /config に絞り込み

> /com
# → /compact のみ
```

### 確定方法

```bash
# Tab キー
> /com[Tab]
→ /compact

# → キー
> /com[→]
→ /compact

# Enter キー（完全一致の場合）
> /compact[Enter]
→ コマンド実行
```

## 修正による改善点

### 視覚的な安定性

```bash
# 修正前:
> /com
#     pact  # ちらつき
#     pac   # ちらつき
#     pact  # ちらつき

# 修正後:
> /com
#     pact  # 安定表示
```

### タイピングの快適性

```bash
# 高速タイピングでも問題なし
> 確認して/compact実行して/context表示
# すべてのゴーストテキストが安定
```

### 候補の読みやすさ

```bash
# 複数候補があっても読みやすい
> /c
# 候補リスト:
# /compact
# /context
# /config
# /clear
# /copy
# ✅ すべて安定表示
```

## スラッシュコマンドの位置

スラッシュコマンドはプロンプトのどこにでも配置できます：

### 行頭
```bash
> /context をチェック
```

### 行中
```bash
> まず /context をチェックしてから実行
```

### 行末
```bash
> タスクを完了したら /compact
```

### 複数配置
```bash
> /context をチェック、/tasks を確認、最後に /compact
```

## 注意点

- **スペースなし**: スラッシュの直後にスペースを入れると、コマンドとして認識されません
- **大文字小文字**: コマンドは小文字で入力します（`/Context` ではなく `/context`）
- **カスタムコマンド**: `.claude/commands/` のカスタムコマンドでも同じように動作します

## 他の補完機能との連携

### ファイル補完（@メンション）

```bash
> @src/
# ファイル候補のゴーストテキストも安定表示
```

### Bash モード補完

```bash
> ! git
# git コマンドのサブコマンド補完も安定
```

### Tab 補完

```bash
# ファイル名やディレクトリ名の Tab 補完
> @docs/[Tab]
# 候補が安定表示
```

## トラブルシューティング

### ゴーストテキストが表示されない

```bash
# 1. スラッシュの直後にスペースがないか確認
> / context  # ❌ スペースあり
> /context   # ✅ スペースなし

# 2. コマンド名のスペルを確認
> /contxt    # ❌ スペルミス
> /context   # ✅ 正しいスペル
```

### ちらつきが残る場合

```bash
# ターミナルの更新を確認
# 一部の古いターミナルでは問題が残る可能性

# 推奨ターミナル:
# - iTerm2 (macOS)
# - WezTerm
# - Kitty
# - Windows Terminal
```

## カスタムスラッシュコマンド

```bash
# .claude/commands/ のカスタムコマンドも対応
.claude/
└── commands/
    ├── deploy.md
    └── test.md

# 使用時:
> /dep
#    loy  ← ゴーストテキストが安定表示
```

## 関連機能

### スラッシュコマンド一覧
```bash
> /help
# または
> ?
```

### オートコンプリート設定
```bash
> /config
# "Enable Prompt Suggestions" を確認
```

## 関連情報

- [Claude Code Slash Commands](https://www.gradually.ai/en/claude-code-commands/)
- [Claude Code Interactive Mode](https://code.claude.com/docs/en/interactive-mode)
- [Claude Code Changelog](https://claudefa.st/blog/guide/changelog)
