---
title: "FileReadToolã®FIFOã€/dev/stdinã€å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ãƒ—ãƒ­ã‚»ã‚¹ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ä¿®æ­£"
date: 2026-02-13
tags: [bugfix, file-reading, performance, fifo]
---

## åŽŸæ–‡ï¼ˆæ—¥æœ¬èªžï¼‰
FileReadToolãŒFIFOã€`/dev/stdin`ã€å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ—ãƒ­ã‚»ã‚¹ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã„ãŸå•é¡Œã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

## åŽŸæ–‡ï¼ˆè‹±èªžï¼‰
Fixed FileReadTool blocking the process on FIFOs, `/dev/stdin`, and large files

## æ¦‚è¦
Claude Code v2.1.41ã§ã¯ã€FileReadToolï¼ˆãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ãƒ„ãƒ¼ãƒ«ï¼‰ãŒFIFOï¼ˆåå‰ä»˜ããƒ‘ã‚¤ãƒ—ï¼‰ã€`/dev/stdin`ï¼ˆæ¨™æº–å…¥åŠ›ï¼‰ã€ã¾ãŸã¯å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€éš›ã«ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ãŒãƒ–ãƒ­ãƒƒã‚¯ï¼ˆå¿œç­”åœæ­¢ï¼‰ã—ã¦ã—ã¾ã†å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ§˜ã€…ãªã‚¿ã‚¤ãƒ—ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚½ãƒ¼ã‚¹ã‚’å®‰å…¨ã«å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

## å•é¡Œã®èƒŒæ™¯

### å½±éŸ¿ã‚’å—ã‘ã¦ã„ãŸçŠ¶æ³

#### 1. FIFOï¼ˆåå‰ä»˜ããƒ‘ã‚¤ãƒ—ï¼‰
FIFOã¯ã€ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ã«ä½¿ç”¨ã•ã‚Œã‚‹ç‰¹æ®Šãªãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚èª­ã¿å–ã‚Šã¯ã€æ›¸ãè¾¼ã¿å´ãŒãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã¾ã§ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚

```bash
# FIFOã®ä½œæˆ
mkfifo /tmp/myfifo

# Claude Codeã§FIFOã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹ã¨ã€ç„¡é™å¾…æ©ŸçŠ¶æ…‹ã«
claude
> "ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’èª­ã‚“ã§ãã ã•ã„: /tmp/myfifo"
# â† ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã€å¿œç­”ã—ãªããªã‚‹
```

#### 2. /dev/stdin
æ¨™æº–å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹ã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹ã¨ã€å…¥åŠ›å¾…ã¡ã§ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã™ã€‚

```bash
# /dev/stdinã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹ã¨ã€å…¥åŠ›å¾…ã¡ã§åœæ­¢
claude
> "ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§ãã ã•ã„: /dev/stdin"
# â† ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å…¥åŠ›å¾…ã¡ã§åœæ­¢
```

#### 3. å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«
éžå¸¸ã«å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæ•°GBä»¥ä¸Šï¼‰ã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹ã¨ã€ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚„ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãŒç™ºç”Ÿã—ã¦ã„ã¾ã—ãŸã€‚

```bash
# 5GBã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹ã¨ã€ãƒ—ãƒ­ã‚»ã‚¹ãŒåœæ­¢
claude
> "ã“ã®å¤§å®¹é‡ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æžã—ã¦ãã ã•ã„: /var/log/huge.log"
# â† ãƒ¡ãƒ¢ãƒªä¸è¶³ã¾ãŸã¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
```

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

### é€šå¸¸ã®ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
ä¿®æ­£å¾Œã‚‚ã€é€šå¸¸ã®ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã¯å¾“æ¥é€šã‚Šå‹•ä½œã—ã¾ã™ã€‚

```bash
claude
> "ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§ãã ã•ã„: README.md"

# æ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã€å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹
```

### FIFOã®å®‰å…¨ãªå‡¦ç†
ä¿®æ­£å¾Œã¯ã€FIFOãŒæ¤œå‡ºã•ã‚Œã€é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```bash
# FIFOã®ä½œæˆ
mkfifo /tmp/datastream

# Claude Codeã§FIFOã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹
> "ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’èª­ã‚“ã§ãã ã•ã„: /tmp/datastream"

# ä¿®æ­£å¾Œ: é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
âŒ Cannot read file: /tmp/datastream is a FIFO (named pipe)
ðŸ’¡ FIFOs require active writers. Use regular files instead.
```

## å®Ÿè·µä¾‹

### ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ã®ãƒ‡ãƒãƒƒã‚°
FIFOã‚’ä½¿ç”¨ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒãƒƒã‚°æ™‚ã€èª¤ã£ã¦FIFOã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã—ã¦ã‚‚å®‰å…¨ã§ã™ã€‚

```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒFIFOã‚’ä½¿ç”¨
mkfifo /tmp/app-communication

# FIFOã®å­˜åœ¨ã‚’ç¢ºèªã—ã‚ˆã†ã¨ã™ã‚‹
> "ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„: /tmp/"

# FIFOãŒæ¤œå‡ºã•ã‚Œã€é©åˆ‡ã«å‡¦ç†ã•ã‚Œã‚‹
Found files:
- app-communication (FIFO - skipped)
- data.json (read successfully)
```

### æ¨™æº–å…¥åŠ›ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã®å›žé¿
èª¤ã£ã¦æ¨™æº–å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹ã‚’èª­ã¿è¾¼ã‚‚ã†ã¨ã—ãŸå ´åˆã€é©åˆ‡ã«æ¤œå‡ºã•ã‚Œã¾ã™ã€‚

```bash
# /dev/stdinã‚’èª¤ã£ã¦èª­ã¿è¾¼ã‚‚ã†ã¨ã™ã‚‹
> "ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§ãã ã•ã„: /dev/stdin"

# ä¿®æ­£å¾Œ: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
âŒ Cannot read file: /dev/stdin is a character device
ðŸ’¡ Use regular files or provide file path instead of device files.
```

### å¤§å®¹é‡ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†
å¤§ããªãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†å‰²ã—ã¦å‡¦ç†ã™ã‚‹ã‚ˆã†ææ¡ˆã•ã‚Œã¾ã™ã€‚

```bash
# 10GBã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
> "ã“ã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æžã—ã¦ãã ã•ã„: /var/log/application.log"

# ä¿®æ­£å¾Œ: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãŽã‚‹å ´åˆã®è­¦å‘Š
âš ï¸  File size: 10.5 GB (too large to read entirely)
ðŸ’¡ Suggestions:
  1. Use 'tail -n 1000 /var/log/application.log' to read recent entries
  2. Use 'grep ERROR /var/log/application.log' to filter specific content
  3. Split the file into smaller chunks

# Claude CodeãŒé©åˆ‡ãªã‚³ãƒžãƒ³ãƒ‰ã‚’ææ¡ˆãƒ»å®Ÿè¡Œ
> bash -c "tail -n 1000 /var/log/application.log"
```

### ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã®å®‰å…¨æ€§
è¤‡é›‘ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ã‚’è¡Œã†éš›ã€FIFOæ¤œå‡ºã«ã‚ˆã‚Šå®‰å…¨æ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚

```bash
# ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
mkfifo /tmp/processing-pipeline

# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ãŒFIFOã«æ›¸ãè¾¼ã¿
cat large-data.csv | process-data > /tmp/processing-pipeline &

# Claude Codeã§FIFOã‚’èª­ã¾ãªã„ã‚ˆã†ä¿è­·
> "ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª¿ã¹ã¦ãã ã•ã„: /tmp/"

# FIFOã¯è‡ªå‹•çš„ã«ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã‚‹
Found files:
- processing-pipeline (FIFO - skipped for safety)
- output.csv (read successfully)
```

### ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã®è‡ªå‹•åˆ¤å®š
æ§˜ã€…ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ãŒæ··åœ¨ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚‚å®‰å…¨ã«å‡¦ç†ã§ãã¾ã™ã€‚

```bash
# æ§˜ã€…ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ãŒå­˜åœ¨
/project/
  - data.txt (é€šå¸¸ãƒ•ã‚¡ã‚¤ãƒ«)
  - stream.fifo (FIFO)
  - /dev/random (ãƒ‡ãƒã‚¤ã‚¹)
  - large.log (5GB)

> "ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§ãã ã•ã„: /project/"

# ä¿®æ­£å¾Œ: å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã‚’é©åˆ‡ã«å‡¦ç†
âœ“ data.txt - Read successfully
âš ï¸  stream.fifo - Skipped (FIFO)
âš ï¸  /dev/random - Skipped (device file)
âš ï¸  large.log - Too large (5GB), reading first 2000 lines only
```

## ã“ã®ä¿®æ­£ã®åˆ©ç‚¹

### å®‰å®šæ€§ã®å‘ä¸Š
- FIFOã§ã®ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°å›žé¿
- `/dev/stdin`ãªã©ã®ãƒ‡ãƒã‚¤ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®å®‰å…¨ãªå‡¦ç†
- å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã‚‹ãƒ¡ãƒ¢ãƒªä¸è¶³ã®é˜²æ­¢

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
- æ˜Žç¢ºãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- ä»£æ›¿æ‰‹æ®µã®ææ¡ˆ
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã®é©åˆ‡ãªæ¤œå‡º

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š
- ãƒ—ãƒ­ã‚»ã‚¹ãŒãƒãƒ³ã‚°ã—ãªã„
- äºˆæœŸã—ãªã„å¾…æ©ŸçŠ¶æ…‹ã®å›žé¿
- å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã®é©åˆ‡ãªå‡¦ç†

## ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã®åˆ¤å®š

ä¿®æ­£å¾Œã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ãŒé©åˆ‡ã«æ¤œå‡ºãƒ»å‡¦ç†ã•ã‚Œã¾ã™ï¼š

| ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ— | å‹•ä½œ |
|---|---|
| é€šå¸¸ãƒ•ã‚¡ã‚¤ãƒ« | é€šå¸¸é€šã‚Šèª­ã¿è¾¼ã¿ |
| FIFOï¼ˆåå‰ä»˜ããƒ‘ã‚¤ãƒ—ï¼‰ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã€ã‚¹ã‚­ãƒƒãƒ— |
| ãƒ‡ãƒã‚¤ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ/dev/*ï¼‰ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã€ã‚¹ã‚­ãƒƒãƒ— |
| å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ>100MBï¼‰ | è­¦å‘Šè¡¨ç¤ºã€éƒ¨åˆ†èª­ã¿è¾¼ã¿ææ¡ˆ |

## æ³¨æ„ç‚¹
- ã“ã®ä¿®æ­£ã¯è‡ªå‹•çš„ã«é©ç”¨ã•ã‚Œã¾ã™
- FIFOã‚’èª­ã¿è¾¼ã‚€å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã€Bashãƒ„ãƒ¼ãƒ«ã§`cat`ã‚³ãƒžãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„
- å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€æœ€åˆã®2000è¡Œã®ã¿ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
- ãƒ‡ãƒã‚¤ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æŽ¥èª­ã¿è¾¼ã‚€ã“ã¨ã¯ã§ãã¾ã›ã‚“

## å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ã®æŽ¨å¥¨å‡¦ç†æ–¹æ³•

### éƒ¨åˆ†èª­ã¿è¾¼ã¿
```bash
# æœ€åˆã®100è¡Œã‚’èª­ã‚€
> bash -c "head -n 100 large.log"

# æœ€å¾Œã®100è¡Œã‚’èª­ã‚€
> bash -c "tail -n 100 large.log"
```

### ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
```bash
# ç‰¹å®šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¿æŠ½å‡º
> bash -c "grep ERROR large.log"

# æ—¥ä»˜ç¯„å›²ã§ãƒ•ã‚£ãƒ«ã‚¿
> bash -c "grep '2026-02-15' large.log"
```

### ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²
```bash
# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’100MBã”ã¨ã«åˆ†å‰²
> bash -c "split -b 100M large.log chunk_"
```

## é–¢é€£æƒ…å ±
- [Claude Code - How it works](https://code.claude.com/docs/en/how-claude-code-works)
- [Claude Code overview - Claude Code Docs](https://code.claude.com/docs/en/overview)
