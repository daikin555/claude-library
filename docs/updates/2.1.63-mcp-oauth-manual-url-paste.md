---
title: "MCP OAuth認証でのマニュアルURL貼り付けフォールバック"
date: 2026-02-28
tags: [mcp, oauth, authentication, fallback]
---

# MCP OAuth認証でのマニュアルURL貼り付けフォールバック

## 原文（日本語に翻訳）

MCP OAuth認証中にマニュアルURLの貼り付けによるフォールバックが追加されました。自動的なlocalhostリダイレクトが機能しない場合に、コールバックURLを貼り付けて認証を完了できます。

## 原文（英語）

Added manual URL paste fallback during MCP OAuth authentication. If the automatic localhost redirect doesn't work, you can paste the callback URL to complete authentication.

## 概要

Claude Code v2.1.63から、MCPサーバーのOAuth認証において、自動的なlocalhostリダイレクトが機能しない環境でも手動でコールバックURLを貼り付けることで認証を完了できるようになりました。リモート環境やSSH接続、特定のネットワーク設定ではlocalhostへのリダイレクトが機能しないことがあるため、このフォールバック機能により認証の信頼性が大幅に向上します。

## 基本的な使い方

### OAuth認証の流れ（手動URLフォールバック）

```
1. MCP OAuth認証が開始される
2. ブラウザで認証ページが開く
3. 認証を完了するとリダイレクトURLが表示される
4. リダイレクトが自動的に機能しない場合：
   → コールバックURLをコピーしてClaude Codeに貼り付ける
5. 認証完了
```

## 実践例

### リモートSSH環境でのMCP認証

```bash
# SSH接続でClaude Codeを使用中にMCP OAuth認証が必要な場合
# 自動リダイレクトが機能しない場合の手順：

1. 認証URLをブラウザで開く（ローカルマシンで）
2. GitHubなどのOAuthプロバイダーで認証
3. リダイレクト先のURL（localhost:...）をコピー
4. Claude Codeの入力欄にURLを貼り付け
5. 認証完了
```

### WSL環境でのMCP認証

```bash
# WSL (Windows Subsystem for Linux) 環境でも同様
# Windows側のブラウザでの認証後、コールバックURLをWSL内のClaude Codeに貼り付け可能
```

### Docker/コンテナ環境での使用

```bash
# コンテナ内でClaude Codeを実行している場合
# localhostポートへのアクセスが制限されていても、
# 手動URLフォールバックで認証が完了できる
```

## 注意点

- 自動リダイレクトが機能する環境では、従来通り自動で認証が完了します
- 手動URLフォールバックは、自動リダイレクトが失敗した場合のみ表示されます
- コールバックURLには認証コードが含まれているため、安全な場所で操作してください
- URLの有効期限が短い場合があるため、コピー後はすぐに貼り付けてください

## 関連情報

- [Claude Code MCP設定](https://docs.anthropic.com/ja/docs/claude-code/mcp)
- [Model Context Protocol OAuth](https://modelcontextprotocol.io/docs/concepts/oauth)
