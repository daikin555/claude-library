---
title: "Bedrock/Vertex/Foundryãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ¢ãƒ‡ãƒ«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ”¹å–„ã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ææ¡ˆ"
date: 2026-02-13
tags: [improvement, error-handling, bedrock, vertex, foundry]
---

## åŸæ–‡ï¼ˆæ—¥æœ¬èªï¼‰
Bedrockã€Vertexã€Foundryã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã«ã€ãƒ¢ãƒ‡ãƒ«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ”¹å–„ã—ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ææ¡ˆã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

## åŸæ–‡ï¼ˆè‹±èªï¼‰
Improved model error messages for Bedrock/Vertex/Foundry users with fallback suggestions

## æ¦‚è¦
Claude Code v2.1.41ã§ã¯ã€AWS Bedrockã€Google Cloud Vertex AIã€IBM watsonx.ai Foundryã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¢ãƒ‡ãƒ«é–¢é€£ã®ã‚¨ãƒ©ãƒ¼ã«é­é‡ã—ãŸéš›ã€ã‚ˆã‚Šè©³ç´°ã§ã‚ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã€ä»£æ›¿ãƒ¢ãƒ‡ãƒ«ã¸ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ææ¡ˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å•é¡Œè§£æ±ºãŒå®¹æ˜“ã«ãªã‚Šã€ä½œæ¥­ã®ä¸­æ–­ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‰ã‚Œã¾ã™ã€‚

## æ”¹å–„å†…å®¹

### ã‚ˆã‚Šè©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
å¾“æ¥ã®ä¸€èˆ¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹ã‚‰ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰ã®å•é¡Œã‚’æ˜ç¢ºã«ç¤ºã™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«æ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚

**ä¿®æ­£å‰:**
```text
âŒ Model error occurred
```

**ä¿®æ­£å¾Œ:**
```text
âŒ Model 'anthropic.claude-3-5-sonnet-20241022-v2:0' not available in your Bedrock region (us-west-2)
ğŸ’¡ Suggestion: Try using 'anthropic.claude-3-sonnet-20240229-v1:0' or change region to us-east-1
```

### ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ææ¡ˆã®è¿½åŠ 
ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«ã€åˆ©ç”¨å¯èƒ½ãªä»£æ›¿ãƒ¢ãƒ‡ãƒ«ã‚„è§£æ±ºç­–ãŒè‡ªå‹•çš„ã«ææ¡ˆã•ã‚Œã¾ã™ã€‚

## åŸºæœ¬çš„ãªä½¿ã„æ–¹

### ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç¢ºèª
ãƒ¢ãƒ‡ãƒ«ãŒåˆ©ç”¨ã§ããªã„å ´åˆã€è©³ç´°ãªæƒ…å ±ã¨ææ¡ˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```bash
# Bedrockç’°å¢ƒã§ãƒ¢ãƒ‡ãƒ«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ
âŒ Model not available in your region
ğŸ’¡ Available alternatives:
  - anthropic.claude-3-sonnet-20240229-v1:0
  - anthropic.claude-3-haiku-20240307-v1:0

ğŸ’¡ Or try changing your region:
  export AWS_REGION=us-east-1
```

### ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¢ãƒ‡ãƒ«ã®ä½¿ç”¨
ææ¡ˆã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã«åˆ‡ã‚Šæ›¿ãˆã¦ä½œæ¥­ã‚’ç¶™ç¶šã—ã¾ã™ã€‚

```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ¢ãƒ‡ãƒ«ã‚’å¤‰æ›´
> /settings

# modelè¨­å®šã‚’ææ¡ˆã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›´
{
  "model": "anthropic.claude-3-sonnet-20240229-v1:0"
}
```

## å®Ÿè·µä¾‹

### Bedrockã§ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³å›ºæœ‰ã®å•é¡Œ
ç‰¹å®šã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ãƒ¢ãƒ‡ãƒ«ãŒåˆ©ç”¨ã§ããªã„å ´åˆã®å¯¾å‡¦æ³•ã§ã™ã€‚

```bash
# us-west-2ã§æœ€æ–°ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã‚ˆã†ã¨ã—ãŸå ´åˆ
export AWS_REGION=us-west-2
claude

âŒ Model 'claude-3-5-sonnet-20241022' not available in us-west-2
ğŸ’¡ This model is available in: us-east-1, eu-west-1
ğŸ’¡ To change region: export AWS_REGION=us-east-1

# ææ¡ˆã«å¾“ã£ã¦ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å¤‰æ›´
export AWS_REGION=us-east-1
claude
âœ“ Successfully connected with claude-3-5-sonnet-20241022
```

### Vertex AIã§ã®ãƒ¢ãƒ‡ãƒ«ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®å•é¡Œ
Google Cloudãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ¢ãƒ‡ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒãªã„å ´åˆã§ã™ã€‚

```bash
# Vertex AIã§ãƒ¢ãƒ‡ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ã‚¨ãƒ©ãƒ¼
âŒ Access denied to model 'claude-3-5-sonnet@20241022'
ğŸ’¡ This model requires Model Garden access in your GCP project
ğŸ’¡ Alternative models available:
  - claude-3-sonnet@20240229
  - claude-3-haiku@20240307

ğŸ’¡ To enable access:
  1. Go to Vertex AI Model Garden
  2. Enable Claude models for your project
```

### Foundryã§ã®ãƒ¢ãƒ‡ãƒ«è¨­å®šã®å•é¡Œ
IBM watsonx.aiç’°å¢ƒã§ã€ãƒ¢ãƒ‡ãƒ«è¨­å®šãŒæ­£ã—ããªã„å ´åˆã§ã™ã€‚

```bash
# Foundryã§ãƒ¢ãƒ‡ãƒ«è¨­å®šã‚¨ãƒ©ãƒ¼
âŒ Invalid model configuration for watsonx.ai
ğŸ’¡ Expected format: 'anthropic/claude-3-5-sonnet'
ğŸ’¡ Your configuration: 'claude-3-5-sonnet'

ğŸ’¡ To fix, update your model setting:
  "model": "anthropic/claude-3-5-sonnet"
```

### è¤‡æ•°ç’°å¢ƒã§ã®è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
CI/CDç’°å¢ƒãªã©ã€è¤‡æ•°ã®ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§å‹•ä½œã•ã›ã‚‹å ´åˆã§ã™ã€‚

```bash
# ç’°å¢ƒã«å¿œã˜ã¦é©åˆ‡ãªãƒ¢ãƒ‡ãƒ«ã‚’ææ¡ˆ
# Bedrockç’°å¢ƒ
âŒ Primary model unavailable
ğŸ’¡ Falling back to: anthropic.claude-3-sonnet-20240229-v1:0

# Vertex AIç’°å¢ƒ
âŒ Primary model unavailable
ğŸ’¡ Falling back to: claude-3-sonnet@20240229
```

### ã‚¯ã‚©ãƒ¼ã‚¿åˆ¶é™ã‚¨ãƒ©ãƒ¼ã®å¯¾å‡¦
ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚„ã‚¯ã‚©ãƒ¼ã‚¿è¶…éæ™‚ã®ä»£æ›¿æ¡ˆæç¤ºã§ã™ã€‚

```bash
âŒ Rate limit exceeded for claude-3-5-sonnet
ğŸ’¡ You've reached your quota for this model
ğŸ’¡ Suggestions:
  1. Wait 60 seconds and retry
  2. Use a smaller model: claude-3-haiku
  3. Increase your quota in the AWS Console
```

## ã“ã®æ”¹å–„ã®åˆ©ç‚¹

### å•é¡Œè§£æ±ºã®è¿…é€ŸåŒ–
- ã‚¨ãƒ©ãƒ¼ã®åŸå› ãŒæ˜ç¢ºã«ç¤ºã•ã‚Œã‚‹
- å…·ä½“çš„ãªè§£æ±ºç­–ãŒææ¡ˆã•ã‚Œã‚‹
- ä»£æ›¿ãƒ¢ãƒ‡ãƒ«ã®æƒ…å ±ãŒã™ãã«å¾—ã‚‰ã‚Œã‚‹

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š
- å°‚é–€çŸ¥è­˜ãŒãªãã¦ã‚‚å¯¾å‡¦å¯èƒ½
- ä½œæ¥­ã®ä¸­æ–­æ™‚é–“ã‚’æœ€å°åŒ–
- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰ã®å•é¡Œã‚’ç†è§£ã—ã‚„ã™ã„

### é–‹ç™ºåŠ¹ç‡ã®æ”¹å–„
- ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®æ™‚é–“å‰Šæ¸›
- ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã§ã®é‹ç”¨ãŒå®¹æ˜“
- è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã«ã‚ˆã‚‹ç¶™ç¶šæ€§ç¢ºä¿

## æ³¨æ„ç‚¹
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¢ãƒ‡ãƒ«ã¯ã€å…ƒã®ãƒ¢ãƒ‡ãƒ«ã¨ç•°ãªã‚‹æ€§èƒ½ã‚„æ©Ÿèƒ½ã‚’æŒã¤å ´åˆãŒã‚ã‚Šã¾ã™
- ãƒªãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ã¯ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼ã‚„ã‚³ã‚¹ãƒˆã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰ã®ã‚¯ã‚©ãƒ¼ã‚¿åˆ¶é™ã«æ³¨æ„ã—ã¦ãã ã•ã„
- å„ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®æ–™é‡‘ä½“ç³»ã‚’äº‹å‰ã«ç¢ºèªã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™

## ãƒ¢ãƒ‡ãƒ«é¸æŠã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- **é–‹ç™ºç’°å¢ƒ**: é«˜é€Ÿã§ä½ã‚³ã‚¹ãƒˆãªHaikuãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨
- **æœ¬ç•ªç’°å¢ƒ**: è¦ä»¶ã«å¿œã˜ã¦Sonnetã¾ãŸã¯Opusã‚’é¸æŠ
- **ã‚³ã‚¹ãƒˆæœ€é©åŒ–**: ã‚¿ã‚¹ã‚¯ã®è¤‡é›‘ã•ã«å¿œã˜ã¦ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã„åˆ†ã‘ã‚‹

## é–¢é€£æƒ…å ±
- [Claude Models on AWS Bedrock](https://docs.aws.amazon.com/bedrock/latest/userguide/models-supported.html)
- [Claude Models on Vertex AI](https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/claude)
- [IBM watsonx.ai Foundation Models](https://www.ibm.com/products/watsonx-ai/foundation-models)
- [Claude Code - How it works](https://code.claude.com/docs/en/how-claude-code-works)
