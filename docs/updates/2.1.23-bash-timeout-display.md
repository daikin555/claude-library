---
title: "Bash コマンドのタイムアウト時間表示"
date: 2026-01-29
tags: [change, bash, ui, timeout]
---

## 原文（日本語訳）
経過時間と並んでタイムアウト時間を表示するように Bash コマンドを変更しました

## 原文（英語）
Changed Bash commands to show timeout duration alongside elapsed time

## 概要
Bash コマンド実行中に、経過時間だけでなくタイムアウトまでの残り時間も表示されるようになりました。これにより、コマンドがタイムアウトするまでにどれくらいの時間があるかを把握できます。

## 表示の変更

### 以前

```
Running: npm install
Elapsed: 45s
```

### 現在

```
Running: npm install
Elapsed: 45s / Timeout: 120s
```

または、進捗バー付きで：

```
Running: npm test
Elapsed: 15s / Timeout: 60s [████░░░░░░] 25%
```

## 実践例

### 長時間実行されるビルドコマンド

```bash
claude
> アプリ全体をビルドしてください
```

表示：
```
Running: npm run build
Elapsed: 90s / Timeout: 300s [██████░░░░] 30%
```

タイムアウトまでの残り時間が視覚的に分かります。

### テストスイートの実行

```bash
claude
> すべてのテストを実行してください
```

表示：
```
Running: npm test
Elapsed: 25s / Timeout: 120s [███░░░░░░░] 20%
```

### カスタムタイムアウトの設定

長時間実行が必要な場合は、タイムアウトを延長できます。

```json
{
  "env": {
    "BASH_DEFAULT_TIMEOUT_MS": "300000",
    "BASH_MAX_TIMEOUT_MS": "600000"
  }
}
```

これにより：
```
Running: ./slow-script.sh
Elapsed: 120s / Timeout: 600s [████░░░░░░] 20%
```

## 注意点

- **視認性**: タイムアウトまでの時間が明確になり、予期しないタイムアウトを防げます
- **デフォルト値**: デフォルトのタイムアウトは120秒（2分）です
- **カスタマイズ**: `BASH_DEFAULT_TIMEOUT_MS` で調整可能です
- **最大値**: `BASH_MAX_TIMEOUT_MS` で最大タイムアウトを設定できます
- **バックグラウンド実行**: 長時間実行するコマンドは Ctrl+B でバックグラウンド化できます
- **Claude への指示**: Claude にタイムアウトの延長を指示することもできます

## タイムアウトのカスタマイズ

### Claude に依頼する方法

```bash
claude
> 5分のタイムアウトでテストを実行してください
```

Claude は適切なタイムアウトを設定します。

### 設定ファイルでの指定

`~/.claude/settings.json`:

```json
{
  "env": {
    "BASH_DEFAULT_TIMEOUT_MS": "180000",
    "BASH_MAX_TIMEOUT_MS": "900000"
  }
}
```

### プロジェクト固有の設定

`.claude/settings.json`:

```json
{
  "env": {
    "BASH_DEFAULT_TIMEOUT_MS": "600000"
  }
}
```

## 関連情報

- [Complete Claude Code Timeout Configuration Guide](https://github.com/anthropics/claude-code/issues/5615)
- [Claude Code Settings Documentation](https://code.claude.com/docs/en/settings)
- [GitHub Issue #3505: Bash commands timeout despite successful completion](https://github.com/anthropics/claude-code/issues/3505)
