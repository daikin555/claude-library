---
title: "プラグインのカスタムnpmレジストリとバージョンピニング対応"
date: 2026-02-24
tags: [plugin, npm, registry, version-pinning, enterprise]
---

## 原文（日本語に翻訳）

npmソースからプラグインをインストールする際に、カスタムnpmレジストリと特定バージョンのピニングをサポートするようになりました。

## 原文（英語）

Added support for custom npm registries and specific version pinning when installing plugins from npm sources

## 概要

Claude Codeプラグインをnpmから取得する際に、カスタムnpmレジストリを指定できるようになりました。これにより、企業内のプライベートnpmレジストリや、Artifactory・Nexus等のプロキシレジストリからプラグインをインストールできます。また、特定のバージョンにピニングすることで、チーム全体で同一バージョンのプラグインを使用することが可能になりました。

## 基本的な使い方

```bash
# 特定バージョンのプラグインをインストール
claude plugin install my-plugin@1.2.3

# カスタムレジストリからインストール
claude plugin install my-plugin --registry https://registry.my-company.com
```

## 実践例

### チームでのバージョン統一

プロジェクトのマーケットプレイス設定ファイルでバージョンをピニング：

```json
{
  "plugins": [
    {
      "name": "my-team-plugin",
      "source": "npm",
      "version": "2.3.1"
    },
    {
      "name": "@company/claude-plugin",
      "source": "npm",
      "version": "1.0.5",
      "registry": "https://npm.company.internal"
    }
  ]
}
```

### プライベートnpmレジストリの利用

企業内のプライベートレジストリからプラグインをインストールする場合：

```bash
# .npmrcにレジストリを設定
echo '@company:registry=https://npm.company.internal' >> ~/.npmrc

# プライベートパッケージをインストール
claude plugin install @company/internal-plugin
```

### CI/CDでの再現性確保

```yaml
# GitHub Actionsの例
- name: 特定バージョンのプラグインをインストール
  run: |
    claude plugin install code-reviewer@3.1.0
    claude plugin install security-scanner@2.0.1
```

### バージョン管理戦略

```bash
# 安定バージョンで固定（プロダクション推奨）
claude plugin install my-plugin@1.2.3

# 最新のマイナーバージョンを使用（開発環境）
claude plugin install my-plugin@^1.2.0

# 最新バージョンを使用（注意が必要）
claude plugin install my-plugin@latest
```

## 注意点

- バージョンピニングを使用することで「自分の環境では動く」問題を防ぐことができます。チームでプラグインを使用する場合は、バージョンを明示的に指定することを推奨します。
- プライベートレジストリを使用する場合、適切な認証設定が必要です。npm認証トークンやBasic認証を設定してください。
- npmを通じたプラグインインストールは、将来的に非推奨になる可能性があります。Anthropicはネイティブインストール方式を推奨しています。
- カスタムレジストリを設定した場合、そのレジストリが利用できない状態ではプラグインのインストールに失敗します。

## 関連情報

- [Claude Code公式ドキュメント](https://code.claude.com/docs/en/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Claude Codeプラグインコミュニティレジストリ](https://claude-plugins.dev/)
- [Team Setup Guide: Standardizing Claude Code Plugin Usage](https://skywork.ai/blog/claude-code-plugin-standardization-team-guide/)
