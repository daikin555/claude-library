---
title: "ターミナルレンダリングパフォーマンスの向上"
date: 2026-01-29
tags: [performance, terminal, ui, optimization]
---

## 原文（日本語訳）
最適化されたスクリーンデータレイアウトにより、ターミナルレンダリングパフォーマンスを向上させました

## 原文（英語）
Improved terminal rendering performance with optimized screen data layout

## 概要
Claude Code のターミナル UI のレンダリング性能が大幅に向上しました。スクリーンデータのレイアウトを最適化することで、フリッカー（ちらつき）が削減され、よりスムーズな表示が実現されました。

## 改善内容

- **フリッカーの削減**: 約85%のフリッカーが削減されました
- **レスポンス向上**: UI の応答性が向上しました
- **スムーズな描画**: ストリーミング中の表示がより滑らかになりました
- **リソース効率**: メモリ使用量とCPU負荷が最適化されました

## 技術的な改善

ターミナルレンダリングシステムは以下のように最適化されました：

1. **レイアウトエンジン**: React シーングラフの構築が高速化
2. **ラスタライズ**: 2D スクリーンへのレンダリングが効率化
3. **差分検出**: 前回のスクリーンとの差分計算が最適化
4. **ANSI 生成**: ANSI エスケープシーケンスの生成が改善
5. **フレーム予算**: 1フレームあたり約5ms以内の処理を実現

## 対応端末

最適化は以下の端末で特に効果を発揮します：

- iTerm2
- WezTerm
- Ghostty
- Kitty
- Alacritty
- Windows Terminal
- VS Code 統合ターミナル

## 実践例

### 長時間セッションでの快適性

```bash
claude
> 大規模なリファクタリングを実行してください
```

長時間の処理でも、UI がスムーズに更新されます。

### ストリーミング出力の改善

```bash
claude -p "Analyze this large codebase" --output-format=stream-json
```

ストリーミング中のちらつきが大幅に削減されました。

### 複数ツール実行時

```bash
claude
> 複数のファイルを同時に編集し、テストを実行してください
```

複数のツールが並行実行される際も、表示が乱れません。

## 注意点

- **端末の設定**: 端末エミュレータの設定によっては、追加の最適化が可能です
- **フォント**: 等幅フォントを使用することを推奨します
- **同期出力**: DEC mode 2026（同期出力）をサポートする端末では、さらにフリッカーが削減されます
- **カラーテーマ**: ハイコントラストのカラーテーマが視認性を向上させます
- **ターミナルサイズ**: 適切なウィンドウサイズを維持することで、最適なパフォーマンスが得られます
- **リモート接続**: SSH 経由の接続では、ネットワーク遅延の影響を受けることがあります

## パフォーマンス最適化のヒント

### 端末設定の確認

```bash
# iTerm2 の場合
# Preferences > Profiles > Terminal >
# "Enable GPU rendering" をオン

# WezTerm の場合
# config で front_end = "WebGpu" を設定
```

### Claude Code の最適化設定

```json
{
  "reducedMotion": false,
  "spinnerTipsEnabled": true
}
```

## 関連情報

- [Optimize your terminal setup - Claude Code Docs](https://code.claude.com/docs/en/terminal-config)
- [Terminal Rendering Rewrite (Twitter Thread by Thariq)](https://x.com/trq212/status/2001439019713073626)
- [Claude Code Internals, Part 11: Terminal UI (Medium)](https://kotrotsos.medium.com/claude-code-internals-part-11-terminal-ui-542fe17db016)
- [Claude Chill: Fix Claude Code's flickering in terminal](https://news.ycombinator.com/item?id=46699072)
