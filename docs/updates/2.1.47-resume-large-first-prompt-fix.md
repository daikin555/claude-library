---
title: "大きな最初のプロンプトを持つセッションが/resumeリストから消える問題を修正"
date: 2026-02-19
tags: [bug-fix, session, resume]
---

## 原文（日本語に翻訳）

最初のプロンプトが大きい（16KBを超える）セッションが `/resume` リストから消えてしまっていた問題を修正 (anthropics/claude-code#26140)

## 原文（英語）
Fixed sessions with large first prompts (>16KB) disappearing from the /resume list (anthropics/claude-code#26140)

## 概要

最初のプロンプトが16KBを超えるセッション（大量のコードや長いドキュメントを含むプロンプトなど）が、セッション再開リスト（`/resume`）から表示されなくなっていた問題が修正されました。これにより、長いコンテキストを含むセッションでも確実に再開できるようになります。

## 基本的な使い方

```bash
# 大きなファイルをコンテキストとして含むセッションを開始
claude -p "$(cat large_codebase.txt) このコードを分析してください"

# または通常のインタラクティブモードで大量のコードを貼り付けた後

# 修正後: /resumeでセッションが正常に表示される
/resume
```

## 実践例

### 大規模コードベースの分析セッションを再開

```bash
# 大きなプロジェクトのコードを最初のプロンプトとして送信してセッション開始
claude

# セッション内で大量のコードを貼り付けて質問
# (例: 数千行のコードを含むファイル内容を貼り付け)
```

```
# 翌日、セッションを再開したい場合
/resume
# 修正後: 大きな最初のプロンプトを持つセッションが正常にリストに表示される
```

### パイプで大きなコンテンツを渡したセッション

```bash
# 大きなファイル内容をパイプでClaudeに渡す
find . -name "*.py" -exec cat {} \; | claude -p "このPythonコードベースのアーキテクチャを説明してください"

# このセッションも /resume リストに正常に表示されるようになった
```

### 長いドキュメントを含むセッション

```bash
# 長い仕様書やドキュメントを含むセッション
claude -p "$(cat specs/requirements.md) この要件に基づいて実装計画を作成してください"

# セッションが16KB以上でも /resume で表示・再開できる
```

## 注意点

- この修正はv2.1.47以降で有効です
- 16KB（約16,000文字）を超える最初のプロンプトを持つセッションが影響を受けていました
- この修正はセッション保存とインデックスの仕組みの改善です
- 既存の消えてしまったセッションは復旧できない場合があります
- セッションを重要なプロジェクトで使用する場合は、定期的なセッション管理を推奨します

## 関連情報

- [Claude Code セッション管理](https://docs.anthropic.com/ja/docs/claude-code/overview)
- [Claude Code CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [Issue #26140](https://github.com/anthropics/claude-code/issues/26140)
