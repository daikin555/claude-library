---
title: "Vim ノーマルモードでの矢印キー履歴ナビゲーション"
date: 2026-01-27
tags: [vim, navigation, history, input]
---

## 原文（日本語訳）
カーソルがこれ以上移動できない場合、Vim ノーマルモードで矢印キーによる履歴ナビゲーションが追加されました

## 原文（英語）
Added arrow key history navigation in vim normal mode when cursor cannot move further

## 概要
Vim モード使用時、カーソルが行の端に達してこれ以上移動できない場合、矢印キーで自動的にコマンド履歴をナビゲートできるようになりました。これにより、Vim キーバインドと履歴機能がシームレスに統合されます。

## 基本的な使い方

Vim モードを有効にしている場合、ノーマルモード（Esc を押した後）でこの機能が利用できます。

```bash
claude
> 前に実行したコマンドを再利用したい
```

ノーマルモードに入った後：
- カーソルが行の先頭にある状態で左矢印キー（←）を押すと、前の履歴が表示されます
- カーソルが行の末尾にある状態で右矢印キー（→）を押すと、次の履歴が表示されます

## 実践例

### 前のコマンドを再利用する

```bash
# Vim モードを有効化
claude
> /vim

# コマンドを入力して実行
> git status をチェックして、変更があれば説明してください

# 次のプロンプトでノーマルモードに入る
> [Esc を押す]
# カーソルが行の先頭にある状態で ← を押す
# → 前のコマンドが表示される
```

### 複数の履歴を遡る

```bash
> コマンド1を実行
> コマンド2を実行
> コマンド3を実行

# 新しいプロンプトで
> [Esc を押してノーマルモードへ]
# 行の先頭で ← ← ← を連続で押す
# → コマンド1まで遡ることができる
```

### Vim の移動コマンドと組み合わせる

```bash
> [Esc でノーマルモードへ]
# 0 を押して行の先頭へ移動
# ← で前の履歴を表示
# $ を押して行の末尾へ移動
# → で次の履歴を表示
```

## 従来の履歴ナビゲーションとの違い

### 以前の動作
- ノーマルモードでは矢印キーは純粋なカーソル移動のみ
- 履歴を参照するには Ctrl+R（検索）を使用する必要があった

### 新しい動作
- カーソルが端に達した場合、自動的に履歴ナビゲーションに切り替わる
- より直感的なワークフロー

## Vim モードの有効化

まだ Vim モードを使用していない場合：

```bash
claude
> /vim
```

または、設定で永続的に有効化：

```bash
claude
> /config
# "Vim Mode" を選択して有効化
```

## 注意点

- **Vim モード専用**: この機能は Vim モードが有効な場合のみ動作します
- **ノーマルモードのみ**: インサートモードでは従来の上下矢印キーで履歴をナビゲートできます
- **カーソル位置**: カーソルがまだ移動できる位置にある場合は、履歴ではなくカーソル移動が優先されます
- **既存の履歴検索**: Ctrl+R による検索ベースの履歴機能も引き続き利用可能です

## 他の Vim 機能との組み合わせ

### Vim の検索機能
```bash
> [Esc]
# / を押して検索モードへ
# 検索語を入力して過去のコマンドを探す
```

### Vim のヤンク・ペースト
```bash
> [Esc]
# yy で現在の行をヤンク
# ← で前の履歴を表示
# p でヤンクした内容をペースト
```

## 関連情報

- [Claude Code Interactive Mode - Vim Mode](https://code.claude.com/docs/en/interactive-mode)
- [Claude Code v2.1.20 Release Notes](https://github.com/anthropics/claude-code/releases/tag/v2.1.20)
- [Claude Code Terminal Setup Guide](https://claudefa.st/blog/guide/terminal-setup-guide)
